import{w as Ke,q as Ae,r as v,s as ee,a6 as Vt,a7 as At,v as he,_ as It,u as zn,o as Lt,p as Et,A as Dt,aL as Tt,J as pn,N as G,D as pe,x as gn,j as x,T as ae,bx as Mn,a as d,m as Pn,ap as Rt,b as ie,bG as Ne,bi as Bn,R as _t,G as ne,an as kn,ad as jn,L as Ot,n as $e,bH as qt,bI as zt,ah as Mt,bu as Pt,bv as Me,bJ as Bt,bK as Pe}from"./index.ec2996a9.js";import"./transform.5b5ae4b7.js";import{m as jt}from"./max.9f900090.js";import{m as Qt,l as Gt,t as Wt,c as Ht,s as Qn,w as Gn,a as Xt}from"./d3-dag.esm.37ab63f1.js";import{D as Wn}from"./DownloadSvgPlot.4d1bc4ed.js";import{M as bn,a as Yt}from"./TableDrawer.dc5a9538.js";import{q as Hn,L as Je}from"./Legend.6c760add.js";import{l as Kt}from"./line.c272abf8.js";import{A as xn,F as Jt}from"./Facets.52ed6bf8.js";import{u as Xn}from"./useBatchDownloader.27945310.js";import{d as Yn}from"./dataTypes.ad082e33.js";import{a as yn,C as wn}from"./CardContent.9d8c6621.js";import"./LinearProgress.9b082d1f.js";import"./graphiql.min.35449f36.js";import"./ToolbarSelect.cd37b9c4.js";import"./TablePagination.6ed57057.js";import"./partnerPreviewUtils.81b319ce.js";import"./FormControlLabel.47f62ae2.js";var Ut=function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:Ae({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}};function Zt(n){var e=n.children,t=n.classes,a=n.className,i=n.open,r=n.value,l=n.valueLabelDisplay;return l==="off"?e:v.exports.cloneElement(e,{className:ee(e.props.className,(i||l==="on")&&t.open,t.thumb)},v.exports.createElement("span",{className:ee(t.offset,a)},v.exports.createElement("span",{className:t.circle},v.exports.createElement("span",{className:t.label},r))))}var ea=Ke(Ut,{name:"PrivateValueLabel"})(Zt);function Be(n,e){return n-e}function je(n,e,t){return Math.min(Math.max(e,n),t)}function Sn(n,e){var t=n.reduce(function(i,r,l){var o=Math.abs(e-r);return i===null||o<i.distance||o===i.distance?{distance:o,index:l}:i},null),a=t.index;return a}function ge(n,e){if(e.current!==void 0&&n.changedTouches){for(var t=0;t<n.changedTouches.length;t+=1){var a=n.changedTouches[t];if(a.identifier===e.current)return{x:a.clientX,y:a.clientY}}return!1}return{x:n.clientX,y:n.clientY}}function ke(n,e,t){return(n-e)*100/(t-e)}function na(n,e,t){return(t-e)*n+e}function ta(n){if(Math.abs(n)<1){var e=n.toExponential().split("e-"),t=e[0].split(".")[1];return(t?t.length:0)+parseInt(e[1],10)}var a=n.toString().split(".")[1];return a?a.length:0}function Nn(n,e,t){var a=Math.round((n-t)/e)*e+t;return Number(a.toFixed(ta(e)))}function $n(n){var e=n.values,t=n.source,a=n.newValue,i=n.index;if(e[i]===a)return t;var r=e.slice();return r[i]=a,r}function be(n){var e=n.sliderRef,t=n.activeIndex,a=n.setActive;(!e.current.contains(document.activeElement)||Number(document.activeElement.getAttribute("data-index"))!==t)&&e.current.querySelector('[role="slider"][data-index="'.concat(t,'"]')).focus(),a&&a(t)}var xe={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},Fn=function(e){return e},aa=function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:e.palette.type==="light"?Vt(e.palette.primary.main,.62):At(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(he(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(he(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(he(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(he(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:Ae({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}},ia=v.exports.forwardRef(function(e,t){var a=e["aria-label"],i=e["aria-labelledby"],r=e["aria-valuetext"],l=e.classes,o=e.className,s=e.color,c=s===void 0?"primary":s,p=e.component,h=p===void 0?"span":p,V=e.defaultValue,$=e.disabled,T=$===void 0?!1:$,m=e.getAriaLabel,R=e.getAriaValueText,I=e.marks,L=I===void 0?!1:I,O=e.max,F=O===void 0?100:O,A=e.min,g=A===void 0?0:A,M=e.name,C=e.onChange,E=e.onChangeCommitted,y=e.onMouseDown,D=e.orientation,P=D===void 0?"horizontal":D,_=e.scale,B=_===void 0?Fn:_,Ze=e.step,q=Ze===void 0?1:Ze,en=e.ThumbComponent,at=en===void 0?"span":en,nn=e.track,re=nn===void 0?"normal":nn,it=e.value,tn=e.ValueLabelComponent,rt=tn===void 0?ea:tn,an=e.valueLabelDisplay,rn=an===void 0?"off":an,on=e.valueLabelFormat,ue=on===void 0?Fn:on,ot=It(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),st=zn(),K=v.exports.useRef(),sn=v.exports.useState(-1),ln=sn[0],me=sn[1],dn=v.exports.useState(-1),lt=dn[0],oe=dn[1],dt=Lt({controlled:it,default:V,name:"Slider"}),cn=Et(dt,2),W=cn[0],fe=cn[1],J=Array.isArray(W),w=J?W.slice().sort(Be):[W];w=w.map(function(u){return je(u,g,F)});var se=L===!0&&q!==null?Dt(Array(Math.floor((F-g)/q)+1)).map(function(u,f){return{value:g+q*f}}):L||[],De=Tt(),ct=De.isFocusVisible,ut=De.onBlurVisible,mt=De.ref,un=v.exports.useState(-1),mn=un[0],Te=un[1],j=v.exports.useRef(),ft=pn(mt,j),vt=pn(t,ft),ht=G(function(u){var f=Number(u.currentTarget.getAttribute("data-index"));ct(u)&&Te(f),oe(f)}),pt=G(function(){mn!==-1&&(Te(-1),ut()),oe(-1)}),gt=G(function(u){var f=Number(u.currentTarget.getAttribute("data-index"));oe(f)}),kt=G(function(){oe(-1)}),Re=st.direction==="rtl",bt=G(function(u){var f=Number(u.currentTarget.getAttribute("data-index")),S=w[f],N=(F-g)/10,k=se.map(function(ze){return ze.value}),Q=k.indexOf(S),b,Oe=Re?"ArrowLeft":"ArrowRight",U=Re?"ArrowRight":"ArrowLeft";switch(u.key){case"Home":b=g;break;case"End":b=F;break;case"PageUp":q&&(b=S+N);break;case"PageDown":q&&(b=S-N);break;case Oe:case"ArrowUp":q?b=S+q:b=k[Q+1]||k[k.length-1];break;case U:case"ArrowDown":q?b=S-q:b=k[Q-1]||k[0];break;default:return}if(u.preventDefault(),q&&(b=Nn(b,q,g)),b=je(b,g,F),J){var qe=b;b=$n({values:w,source:W,newValue:b,index:f}).sort(Be),be({sliderRef:j,activeIndex:b.indexOf(qe)})}fe(b),Te(f),C&&C(u,b),E&&E(u,b)}),fn=v.exports.useRef(),H=P;Re&&P!=="vertical"&&(H+="-reverse");var ve=function(f){var S=f.finger,N=f.move,k=N===void 0?!1:N,Q=f.values,b=f.source,Oe=j.current,U=Oe.getBoundingClientRect(),qe=U.width,ze=U.height,St=U.bottom,Nt=U.left,le;H.indexOf("vertical")===0?le=(St-S.y)/ze:le=(S.x-Nt)/qe,H.indexOf("-reverse")!==-1&&(le=1-le);var z;if(z=na(le,g,F),q)z=Nn(z,q,g);else{var hn=se.map(function(Ct){return Ct.value}),$t=Sn(hn,z);z=hn[$t]}z=je(z,g,F);var Z=0;if(J){k?Z=fn.current:Z=Sn(Q,z);var Ft=z;z=$n({values:Q,source:b,newValue:z,index:Z}).sort(Be),Z=z.indexOf(Ft),fn.current=Z}return{newValue:z,activeIndex:Z}},X=G(function(u){var f=ge(u,K);if(!!f){var S=ve({finger:f,move:!0,values:w,source:W}),N=S.newValue,k=S.activeIndex;be({sliderRef:j,activeIndex:k,setActive:me}),fe(N),C&&C(u,N)}}),Y=G(function(u){var f=ge(u,K);if(!!f){var S=ve({finger:f,values:w,source:W}),N=S.newValue;me(-1),u.type==="touchend"&&oe(-1),E&&E(u,N),K.current=void 0;var k=pe(j.current);k.removeEventListener("mousemove",X),k.removeEventListener("mouseup",Y),k.removeEventListener("touchmove",X),k.removeEventListener("touchend",Y)}}),_e=G(function(u){u.preventDefault();var f=u.changedTouches[0];f!=null&&(K.current=f.identifier);var S=ge(u,K),N=ve({finger:S,values:w,source:W}),k=N.newValue,Q=N.activeIndex;be({sliderRef:j,activeIndex:Q,setActive:me}),fe(k),C&&C(u,k);var b=pe(j.current);b.addEventListener("touchmove",X),b.addEventListener("touchend",Y)});v.exports.useEffect(function(){var u=j.current;u.addEventListener("touchstart",_e);var f=pe(u);return function(){u.removeEventListener("touchstart",_e),f.removeEventListener("mousemove",X),f.removeEventListener("mouseup",Y),f.removeEventListener("touchmove",X),f.removeEventListener("touchend",Y)}},[Y,X,_e]);var xt=G(function(u){y&&y(u),u.preventDefault();var f=ge(u,K),S=ve({finger:f,values:w,source:W}),N=S.newValue,k=S.activeIndex;be({sliderRef:j,activeIndex:k,setActive:me}),fe(N),C&&C(u,N);var Q=pe(j.current);Q.addEventListener("mousemove",X),Q.addEventListener("mouseup",Y)}),vn=ke(J?w[0]:g,g,F),yt=ke(w[w.length-1],g,F)-vn,wt=Ae({},xe[H].offset(vn),xe[H].leap(yt));return v.exports.createElement(h,Ae({ref:vt,className:ee(l.root,l["color".concat(gn(c))],o,T&&l.disabled,se.length>0&&se.some(function(u){return u.label})&&l.marked,re===!1&&l.trackFalse,P==="vertical"&&l.vertical,re==="inverted"&&l.trackInverted),onMouseDown:xt},ot),v.exports.createElement("span",{className:l.rail}),v.exports.createElement("span",{className:l.track,style:wt}),v.exports.createElement("input",{value:w.join(","),name:M,type:"hidden"}),se.map(function(u,f){var S=ke(u.value,g,F),N=xe[H].offset(S),k;return re===!1?k=w.indexOf(u.value)!==-1:k=re==="normal"&&(J?u.value>=w[0]&&u.value<=w[w.length-1]:u.value<=w[0])||re==="inverted"&&(J?u.value<=w[0]||u.value>=w[w.length-1]:u.value>=w[0]),v.exports.createElement(v.exports.Fragment,{key:u.value},v.exports.createElement("span",{style:N,"data-index":f,className:ee(l.mark,k&&l.markActive)}),u.label!=null?v.exports.createElement("span",{"aria-hidden":!0,"data-index":f,style:N,className:ee(l.markLabel,k&&l.markLabelActive)},u.label):null)}),w.map(function(u,f){var S=ke(u,g,F),N=xe[H].offset(S);return v.exports.createElement(rt,{key:f,valueLabelFormat:ue,valueLabelDisplay:rn,className:l.valueLabel,value:typeof ue=="function"?ue(B(u),f):ue,index:f,open:lt===f||ln===f||rn==="on",disabled:T},v.exports.createElement(at,{className:ee(l.thumb,l["thumbColor".concat(gn(c))],ln===f&&l.active,T&&l.disabled,mn===f&&l.focusVisible),tabIndex:T?null:0,role:"slider",style:N,"data-index":f,"aria-label":m?m(f):a,"aria-labelledby":i,"aria-orientation":P,"aria-valuemax":B(F),"aria-valuemin":B(g),"aria-valuenow":B(u),"aria-valuetext":R?R(B(u),f):r,onKeyDown:bt,onFocus:ht,onBlur:pt,onMouseOver:gt,onMouseLeave:kt}))}))}),ra=Ke(aa,{name:"MuiSlider"})(ia);function oa(n){var e=0,t=n.children,a=t&&t.length;if(!a)e=1;else for(;--a>=0;)e+=t[a].value;n.value=e}function sa(){return this.eachAfter(oa)}function la(n){var e=this,t,a=[e],i,r,l;do for(t=a.reverse(),a=[];e=t.pop();)if(n(e),i=e.children,i)for(r=0,l=i.length;r<l;++r)a.push(i[r]);while(a.length);return this}function da(n){for(var e=this,t=[e],a,i;e=t.pop();)if(n(e),a=e.children,a)for(i=a.length-1;i>=0;--i)t.push(a[i]);return this}function ca(n){for(var e=this,t=[e],a=[],i,r,l;e=t.pop();)if(a.push(e),i=e.children,i)for(r=0,l=i.length;r<l;++r)t.push(i[r]);for(;e=a.pop();)n(e);return this}function ua(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,a=e.children,i=a&&a.length;--i>=0;)t+=a[i].value;e.value=t})}function ma(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function fa(n){for(var e=this,t=va(e,n),a=[e];e!==t;)e=e.parent,a.push(e);for(var i=a.length;n!==t;)a.splice(i,0,n),n=n.parent;return a}function va(n,e){if(n===e)return n;var t=n.ancestors(),a=e.ancestors(),i=null;for(n=t.pop(),e=a.pop();n===e;)i=n,n=t.pop(),e=a.pop();return i}function ha(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function pa(){var n=[];return this.each(function(e){n.push(e)}),n}function ga(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function ka(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function Ue(n,e){var t=new Ie(n),a=+n.value&&(t.value=n.value),i,r=[t],l,o,s,c;for(e==null&&(e=xa);i=r.pop();)if(a&&(i.value=+i.data.value),(o=e(i.data))&&(c=o.length))for(i.children=new Array(c),s=c-1;s>=0;--s)r.push(l=i.children[s]=new Ie(o[s])),l.parent=i,l.depth=i.depth+1;return t.eachBefore(wa)}function ba(){return Ue(this).eachBefore(ya)}function xa(n){return n.children}function ya(n){n.data=n.data.data}function wa(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Ie(n){this.data=n,this.depth=this.height=0,this.parent=null}Ie.prototype=Ue.prototype={constructor:Ie,count:sa,each:la,eachAfter:ca,eachBefore:da,sum:ua,sort:ma,path:fa,ancestors:ha,descendants:pa,leaves:ga,links:ka,copy:ba};var Sa=Array.prototype.slice;function Na(n){for(var e=n.length,t,a;e;)a=Math.random()*e--|0,t=n[e],n[e]=n[a],n[a]=t;return n}function $a(n){for(var e=0,t=(n=Na(Sa.call(n))).length,a=[],i,r;e<t;)i=n[e],r&&Kn(r,i)?++e:(r=Ca(a=Fa(a,i)),e=0);return r}function Fa(n,e){var t,a;if(Qe(e,n))return[e];for(t=0;t<n.length;++t)if(ye(e,n[t])&&Qe(de(n[t],e),n))return[n[t],e];for(t=0;t<n.length-1;++t)for(a=t+1;a<n.length;++a)if(ye(de(n[t],n[a]),e)&&ye(de(n[t],e),n[a])&&ye(de(n[a],e),n[t])&&Qe(Jn(n[t],n[a],e),n))return[n[t],n[a],e];throw new Error}function ye(n,e){var t=n.r-e.r,a=e.x-n.x,i=e.y-n.y;return t<0||t*t<a*a+i*i}function Kn(n,e){var t=n.r-e.r+1e-6,a=e.x-n.x,i=e.y-n.y;return t>0&&t*t>a*a+i*i}function Qe(n,e){for(var t=0;t<e.length;++t)if(!Kn(n,e[t]))return!1;return!0}function Ca(n){switch(n.length){case 1:return Va(n[0]);case 2:return de(n[0],n[1]);case 3:return Jn(n[0],n[1],n[2])}}function Va(n){return{x:n.x,y:n.y,r:n.r}}function de(n,e){var t=n.x,a=n.y,i=n.r,r=e.x,l=e.y,o=e.r,s=r-t,c=l-a,p=o-i,h=Math.sqrt(s*s+c*c);return{x:(t+r+s/h*p)/2,y:(a+l+c/h*p)/2,r:(h+i+o)/2}}function Jn(n,e,t){var a=n.x,i=n.y,r=n.r,l=e.x,o=e.y,s=e.r,c=t.x,p=t.y,h=t.r,V=a-l,$=a-c,T=i-o,m=i-p,R=s-r,I=h-r,L=a*a+i*i-r*r,O=L-l*l-o*o+s*s,F=L-c*c-p*p+h*h,A=$*T-V*m,g=(T*F-m*O)/(A*2)-a,M=(m*R-T*I)/A,C=($*O-V*F)/(A*2)-i,E=(V*I-$*R)/A,y=M*M+E*E-1,D=2*(r+g*M+C*E),P=g*g+C*C-r*r,_=-(y?(D+Math.sqrt(D*D-4*y*P))/(2*y):P/D);return{x:a+g+M*_,y:i+C+E*_,r:_}}function Cn(n,e,t){var a=n.x-e.x,i,r,l=n.y-e.y,o,s,c=a*a+l*l;c?(r=e.r+t.r,r*=r,s=n.r+t.r,s*=s,r>s?(i=(c+s-r)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),t.x=n.x-i*a-o*l,t.y=n.y-i*l+o*a):(i=(c+r-s)/(2*c),o=Math.sqrt(Math.max(0,r/c-i*i)),t.x=e.x+i*a-o*l,t.y=e.y+i*l+o*a)):(t.x=e.x+t.r,t.y=e.y)}function Vn(n,e){var t=n.r+e.r-1e-6,a=e.x-n.x,i=e.y-n.y;return t>0&&t*t>a*a+i*i}function An(n){var e=n._,t=n.next._,a=e.r+t.r,i=(e.x*t.r+t.x*e.r)/a,r=(e.y*t.r+t.y*e.r)/a;return i*i+r*r}function we(n){this._=n,this.next=null,this.previous=null}function Aa(n){if(!(i=n.length))return 0;var e,t,a,i,r,l,o,s,c,p,h;if(e=n[0],e.x=0,e.y=0,!(i>1))return e.r;if(t=n[1],e.x=-t.r,t.x=e.r,t.y=0,!(i>2))return e.r+t.r;Cn(t,e,a=n[2]),e=new we(e),t=new we(t),a=new we(a),e.next=a.previous=t,t.next=e.previous=a,a.next=t.previous=e;e:for(o=3;o<i;++o){Cn(e._,t._,a=n[o]),a=new we(a),s=t.next,c=e.previous,p=t._.r,h=e._.r;do if(p<=h){if(Vn(s._,a._)){t=s,e.next=t,t.previous=e,--o;continue e}p+=s._.r,s=s.next}else{if(Vn(c._,a._)){e=c,e.next=t,t.previous=e,--o;continue e}h+=c._.r,c=c.previous}while(s!==c.next);for(a.previous=e,a.next=t,e.next=t.previous=t=a,r=An(e);(a=a.next)!==t;)(l=An(a))<r&&(e=a,r=l);t=e.next}for(e=[t._],a=t;(a=a.next)!==t;)e.push(a._);for(a=$a(e),o=0;o<i;++o)e=n[o],e.x-=a.x,e.y-=a.y;return a.r}function Ia(n){return n==null?null:La(n)}function La(n){if(typeof n!="function")throw new Error;return n}function In(){return 0}function Ea(n){return function(){return n}}function Da(n){return Math.sqrt(n.value)}function Ta(){var n=null,e=1,t=1,a=In;function i(r){return r.x=e/2,r.y=t/2,n?r.eachBefore(Ln(n)).eachAfter(Ge(a,.5)).eachBefore(En(1)):r.eachBefore(Ln(Da)).eachAfter(Ge(In,1)).eachAfter(Ge(a,r.r/Math.min(e,t))).eachBefore(En(Math.min(e,t)/(2*r.r))),r}return i.radius=function(r){return arguments.length?(n=Ia(r),i):n},i.size=function(r){return arguments.length?(e=+r[0],t=+r[1],i):[e,t]},i.padding=function(r){return arguments.length?(a=typeof r=="function"?r:Ea(+r),i):a},i}function Ln(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0))}}function Ge(n,e){return function(t){if(a=t.children){var a,i,r=a.length,l=n(t)*e||0,o;if(l)for(i=0;i<r;++i)a[i].r+=l;if(o=Aa(a),l)for(i=0;i<r;++i)a[i].r-=l;t.r=o+l}}}function En(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}const Ra=()=>({root:{width:300},container:{padding:"10px 0"}}),_a=({classes:n,value:e,onChange:t,onChangeCommitted:a})=>x("div",{className:n.root,children:[x(ae,{id:"label",children:["Minimum Score: ",e.toFixed(Mn)]}),d(ra,{classes:{root:n.container},defaultValue:e,value:e,step:.01,min:0,max:1,onChange:t,onChangeCommitted:a})]});var Un=Ke(Ra)(_a);const Oa=Pn(n=>({tooltip:{backgroundColor:"white",border:`1px solid ${n.palette.grey[400]}`}}));function Zn({ensemblId:n,efoId:e,name:t,score:a,children:i}){const r=Oa();return d(Rt,{classes:{tooltip:r.tooltip},title:x(ie,{children:[d(ae,{variant:"subtitle2",align:"center",color:"textPrimary",children:t}),a?x(ae,{variant:"body2",align:"center",color:"textPrimary",children:["association score: ",a.toFixed(Mn)]}):null,d(bn,{component:Ne,to:`/disease/${e}`,underline:"none",display:"block",align:"center",variant:"body2",children:"Disease profile"}),d(bn,{href:`https://www.targetvalidation.org/evidence/${n}/${e}`,underline:"none",display:"block",align:"center",variant:"body2",children:"Association evidence"})]}),interactive:!0,placement:"top",children:i})}const Dn=Hn().domain([0,1]).range(Bn),Tn=Kt().curve(Qt),ce=8,Se=ce/2,We=100;function qa(n,e){return n?n.length<=e?n:n.slice(0,e)+"...":""}function za({ensemblId:n,width:e,height:t,links:a,nodes:i,xOffset:r,textLimit:l,svgRef:o}){return Tn.x(s=>s.y-r).y(s=>s.x),x("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:o,width:e,height:t+We,children:[d("defs",{children:d("marker",{id:"arrowhead",orient:"auto",markerWidth:"2",markerHeight:"4",refX:"0.1",refY:"2",children:d("path",{d:"M0,0 V4 L2,2 Z",fill:"#5a5f5f"})})}),x("g",{transform:"translate(0, 10)",children:[d("rect",{x:"2",width:ce,height:ce,fill:"none",stroke:"#e0e0e0",strokeWidth:"2"}),d("text",{x:"16",y:"4",fill:"#5a5f5f",dominantBaseline:"middle",fontSize:"12",children:"therapeutic area"}),d("circle",{cx:"6",cy:"20",r:Se,fill:"none",stroke:"#e0e0e0",strokeWidth:"2"}),d("text",{fill:"#5a5f5f",x:"16",y:"20",dominantBaseline:"middle",fontSize:"12",children:"disease"})]}),x("g",{transform:`translate(${e/2}, 70)`,children:[d("text",{x:"-160",fontWeight:"bold",fontSize:"14",fill:"#5a5f5f",dominantBaseline:"middle",children:"GENERAL"}),d("text",{x:"100",fontWeight:"bold",fontSize:"14",fill:"#5a5f5f",dominantBaseline:"middle",children:"SPECIFIC"}),d("path",{markerEnd:"url(#arrowhead)",strokeWidth:"2",fill:"none",stroke:"#5a5f5f",d:"M-80,0 L80,0"})]}),d("g",{transform:`translate(0, ${We})`,children:a.map(({points:s,source:c,target:p})=>d("path",{d:Tn(s),fill:"none",strokeWidth:"2",stroke:"#eeeeee"},`${c.id}-${p.id}`))}),d("g",{transform:`translate(0, ${We})`,children:i.map(s=>x(v.exports.Fragment,{children:[x("text",{x:s.y-r,y:s.x,dx:"6",fontSize:"12",dominantBaseline:"middle",children:[d("title",{children:s.data.name}),qa(s.data.name,l)]}),d(Zn,{ensemblId:n,efoId:s.data.id,name:s.data.name,score:s.data.score,children:s.data.parentIds.length===0?d("rect",{x:s.y-Se-r,y:s.x-Se,width:ce,height:ce,fill:s.data.score?Dn(s.data.score):"white",stroke:"#e0e0e0"}):d("circle",{cx:s.y-r,cy:s.x,r:Se,fill:Dn(s.data.score),stroke:"#e0e0e0"})})]},s.id))})]})}var Ma=_t.memo(za);function Pa(n,e,t){const a=[],i=[n],r=new Set;for(;i.length>0;){const l=i.shift(),o=e[l];for(let s=0;s<o.parentIds.length;s++){const c=o.parentIds[s];if(!r.has(c)){r.add(c);const p=e[c];t[c]||p.parentIds.length===0?a.push(c):i.push(c)}}}return a}function Ba(n,e,t){const a=[],i=new Set;return e.forEach(r=>{const l=Pa(r.disease.id,n,t);l.forEach(o=>{n[o].parentIds.length===0&&!t[o]&&i.add(o)}),a.push({id:r.disease.id,name:r.disease.name,score:r.score,parentIds:l})}),i.forEach(r=>{a.push({id:r,name:n[r].name,parentIds:[]})}),a}const et=Gt(),nt=Wt(),tt=Ht(),ja=Qn().layering(et).decross(nt).coord(tt);function Qa(n){ja(n);const e={};let t=Number.NEGATIVE_INFINITY;return n.descendants().forEach(a=>{const{layer:i}=a;e[i]?e[i]++:e[i]=1,e[i]>t&&(t=e[i])}),t}const Ga=8,Wa=Ga/2;function Ha({ensemblId:n,symbol:e,idToDisease:t,associations:a,measureRef:i,contentRect:r}){const l=v.exports.useRef(null),[o,s]=v.exports.useState(.1),[c,p]=v.exports.useState(.1),{width:h}=r.bounds,{assocs:V,height:$,nodes:T,xOffset:m,links:R,textLimit:I}=v.exports.useMemo(()=>{const L=a.filter(_=>_.score>=c),O=L.reduce((_,B)=>(_[B.disease.id]=B,_),{}),F=Ba(t,L,O);let A,g,M,C,E,y,D,P;if(F.length>0){A=Xt()(F),g=Qa(A),M=g*10,C=Qn().layering(et).decross(nt).coord(tt).size([M,h]),C(A),E=A.descendants(),y=A.links();const _=h/(jt(E,B=>B.layer)+1);D=_/2-Wa,P=_/8}return{assocs:L,dag:A,height:M,nodes:E,xOffset:D,links:y,textLimit:P}},[a,t,c,h]);return x(ie,{children:[x(Wn,{svgContainer:l,filenameStem:`${e}-associated-diseases-dag`,children:[d(Un,{value:o,onChange:(L,O)=>s(O),onChangeCommitted:(L,O)=>p(O)}),d(ne,{ref:i,item:!0,container:!0,justifyContent:"center",alignItems:"center",style:{margin:"0 auto",minHeight:"340px"},children:h?V.length>0?d(Ma,{ensemblId:n,width:h,height:$,links:R,nodes:T,xOffset:m,textLimit:I,svgRef:l}):x(ae,{align:"center",children:["No associations with score greater than or equal to"," ",c]}):null})]}),d(Je,{})]})}var Xa=Gn("bounds")(Ha);function Ya(n,e){const t=new Set;if(e[n].parentIds.length===0)return t;const i=[n];for(;i.length>0;){const r=i.shift(),l=e[r];l.parentIds.length===0&&t.add(r);for(let o=0;o<l.parentIds.length;o++){const s=l.parentIds[o];i.includes(s)||i.push(s)}}return t}function Ka(n,e){const t={},a={};return n.forEach(i=>{const r=i.disease.id;e[r].parentIds.length===0&&(a[r]=i.score),Ya(r,e).forEach(o=>{const s={id:r,uniqueId:`${o}-${r}`,name:i.disease.name,score:i.score};t[o]?t[o].push(s):t[o]=[s]})}),{uniqueId:"EFO_ROOT",children:Object.entries(t).map(([i,r])=>({id:i,uniqueId:i,name:e[i].name,score:a[i],children:r}))}}const Ja=Hn().domain([0,1]).range(Bn);function Ua({ensemblId:n,symbol:e,idToDisease:t,associations:a,measureRef:i,contentRect:r}){const[l,o]=v.exports.useState(.1),s=v.exports.useRef(null),c=zn(),p=a.filter(m=>m.score>=l),{width:h}=r.bounds,V=Ka(p,t),$=Ue(V),T=Ta().size([h,h]).padding(m=>m.data.uniqueId==="EFO_ROOT"?17:2);return $.sum(m=>m.score),T($),x(ie,{children:[x(Wn,{svgContainer:s,filenameStem:`${e}-associated-diseases-bubbles`,children:[d(Un,{value:l,onChange:(m,R)=>o(R)}),d(ne,{item:!0,container:!0,ref:i,md:10,justifyContent:"center",alignItems:"center",style:{margin:"0 auto",minHeight:"340px"},children:h?p.length>0?d("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:s,height:h,width:h,children:$.descendants().map(m=>x("g",{transform:`translate(${m.x},${m.y})`,children:[d(Zn,{ensemblId:n,efoId:m.data.id,name:m.data.name,score:m.data.score,children:d("path",{id:m.data.uniqueId,d:`M 0, ${m.r} a ${m.r},${m.r} 0 1,1 0,-${2*m.r} a ${m.r},${m.r} 0 1,1 0,${2*m.r}`,stroke:m.data.uniqueId!=="EFO_ROOT"?c.palette.grey[400]:"none",fill:m.data.uniqueId==="EFO_ROOT"||m.parent.data.uniqueId==="EFO_ROOT"?c.palette.grey[50]:Ja(m.data.score),pointerEvents:m.data.uniqueId==="EFO_ROOT"?"none":"auto"})}),m.data.uniqueId==="EFO_ROOT"?null:m.parent&&m.parent.data.uniqueId==="EFO_ROOT"?d("text",{textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:c.palette.grey[400],pointerEvents:"none",children:d("textPath",{startOffset:"50%",xlinkHref:`#${m.data.uniqueId}`,children:m.data.name})}):m.r>15?x(ie,{children:[d("clipPath",{id:`clip-${m.data.uniqueId}`,children:d("circle",{cx:"0",cy:"0",r:m.r})}),d("text",{clipPath:`url(#clip-${m.data.uniqueId})`,fontSize:"11",textAnchor:"middle",pointerEvents:"none",children:m.data.name.split(" ").map((R,I,L)=>d("tspan",{x:"0",y:`${I-L.length/2+.8}em`,children:R},I))})]}):null]},m.data.uniqueId))}):x(ae,{children:["No associations with score greater than or equal to ",l]}):null})]}),d(Je,{})]})}var Za=Gn("bounds")(Ua),te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TargetAssociationsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ensemblId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"index"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"size"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortBy"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AggregationFilter"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"target"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ensemblId"},value:{kind:"Variable",name:{kind:"Name",value:"ensemblId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associatedDiseases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"index"},value:{kind:"Variable",name:{kind:"Name",value:"index"}}},{kind:"ObjectField",name:{kind:"Name",value:"size"},value:{kind:"Variable",name:{kind:"Name",value:"size"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderByScore"},value:{kind:"Variable",name:{kind:"Name",value:"sortBy"}}},{kind:"Argument",name:{kind:"Name",value:"BFilter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}},{kind:"Argument",name:{kind:"Name",value:"aggregationFilters"},value:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disease"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"datatypeScores"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"componentId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:572}};te.loc.source={body:`query TargetAssociationsQuery(
  $ensemblId: String!
  $index: Int!
  $size: Int!
  $filter: String
  $sortBy: String!
  $aggregationFilters: [AggregationFilter!]
) {
  target(ensemblId: $ensemblId) {
    id
    associatedDiseases(
      page: { index: $index, size: $size }
      orderByScore: $sortBy
      BFilter: $filter
      aggregationFilters: $aggregationFilters
    ) {
      count
      rows {
        disease {
          id
          name
        }
        score
        datatypeScores {
          componentId: id
          score
        }
      }
    }
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function Fe(n,e){if(n.kind==="FragmentSpread")e.add(n.name.value);else if(n.kind==="VariableDefinition"){var t=n.type;t.kind==="NamedType"&&e.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(a){Fe(a,e)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(a){Fe(a,e)}),n.definitions&&n.definitions.forEach(function(a){Fe(a,e)})}var He={};(function(){te.definitions.forEach(function(e){if(e.name){var t=new Set;Fe(e,t),He[e.name.value]=t}})})();function Rn(n,e){for(var t=0;t<n.definitions.length;t++){var a=n.definitions[t];if(a.name&&a.name.value==e)return a}}function ei(n,e){var t={kind:n.kind,definitions:[Rn(n,e)]};n.hasOwnProperty("loc")&&(t.loc=n.loc);var a=He[e]||new Set,i=new Set,r=new Set;for(a.forEach(function(o){r.add(o)});r.size>0;){var l=r;r=new Set,l.forEach(function(o){if(!i.has(o)){i.add(o);var s=He[o]||new Set;s.forEach(function(c){r.add(c)})}})}return i.forEach(function(o){var s=Rn(n,o);s&&t.definitions.push(s)}),t}ei(te,"TargetAssociationsQuery");const ni=Pn(n=>({root:{overflow:"visible",padding:"2rem 3rem 0 0"},table:{tableLayout:"fixed"},sortLabel:{top:"8px"},innerLabel:{position:"absolute",display:"inline-block",transformOrigin:"0 0",bottom:0,transform:"rotate(315deg)",marginBottom:"5px"},nameHeaderCell:{width:"20%",borderBottom:0,height:"140px",verticalAlign:"bottom",textAlign:"end",paddingBottom:".4rem"},headerCell:{position:"relative",borderBottom:0,height:"140px",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"bottom"},overallCell:{border:0,textAlign:"center",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"1px",paddingRight:"10px"},cell:{border:0,height:"20px",textAlign:"center",padding:"1px 1px","&:last-child":{paddingRight:0}},colorSpan:{display:"block",height:"20px",border:"1px solid #eeefef"},nameCell:{border:0,width:"20%",padding:"0 0.5rem 0 0","&:first-child":{paddingLeft:0}},nameContainer:{display:"block",textAlign:"end",textOverflow:"ellipsis",overflow:"hidden",color:n.palette.text.primary,"&:hover":{color:n.palette.text.primary}}}));function ti(n,e){const t=[{id:"name",label:"Name",classes:{headerCell:e.nameHeaderCell,cell:e.nameCell},exportValue:a=>a.disease.name,renderCell:a=>d(Ot,{to:`/evidence/${n}/${a.efoId}`,className:e.nameContainer,children:d("span",{title:a.name,children:a.name})})},{id:"score",label:"Overall association score",classes:{headerCell:e.headerCell,cell:e.overallCell,sortLabel:e.sortLabel,innerLabel:e.innerLabel},sortable:!0,renderCell:({score:a,efoId:i})=>d(xn,{score:a,ensemblId:n,efoId:i})}];return Yn.filter(a=>($e.profile.hideDataTypes.length===0||!$e.profile.hideDataTypes.includes(a.id))&&(!a.isPrivate||a.isPrivate&&$e.profile.isPartnerPreview)).forEach(a=>{t.push({id:a.id,label:a.label,classes:{headerCell:e.headerCell,innerLabel:e.innerLabel,sortLabel:e.sortLabel,cell:e.cell},exportValue:i=>{const r=i.datatypeScores.find(l=>l.componentId===a.id);return r?r.score:"No data"},sortable:!0,renderCell:i=>d(xn,{score:i[a.id],ensemblId:n,efoId:i.efoId})})}),t}function ai(n){return n.map(e=>{const t={name:e.disease.name,efoId:e.disease.id,score:e.score};return Yn.forEach(a=>{const i=e.datatypeScores.find(r=>r.componentId===a.id);i&&(t[a.id]=i.score)}),t})}function ii({ensgId:n,aggregationFilters:e}){const t=ni(),[a,i]=v.exports.useState([]),[r,l]=v.exports.useState(),[o,s]=v.exports.useState(!0),[c,p]=v.exports.useState(!1),[h,V]=v.exports.useState(""),[$,T]=v.exports.useState("score"),[m,R]=v.exports.useState(0),[I,L]=v.exports.useState(50);v.exports.useEffect(()=>{let y=!0;return p(!0),kn.query({query:te,variables:{ensemblId:n,index:0,size:I,sortBy:$,filter:h,aggregationFilters:e}}).then(({data:D})=>{y&&(i(D.target.associatedDiseases.rows),l(D.target.associatedDiseases.count),R(0),s(!1),p(!1))}),()=>y=!1},[n,I,$,h,e]);const O=Xn(te,{ensemblId:n,filter:h===""?null:h,sortBy:$,aggregationFilters:e},"data.target.associatedDiseases");function F(y){p(!0),kn.query({query:te,variables:{ensemblId:n,index:y,size:I,sortBy:$,filter:h,aggregationFilters:e}}).then(({data:D})=>{i(D.target.associatedDiseases.rows),R(y),p(!1)})}function A(y){L(y)}function g(y){T(y)}function M(y){y!==h&&V(y)}if(o)return d(jn,{variant:"rect",height:"40vh"});const C=ti(n,t),E=ai(a);return x(ie,{children:[d(Yt,{hover:!0,showGlobalFilter:!0,loading:c,dataDownloader:!0,dataDownloaderRows:O,dataDownloaderFileStem:`${n}-associated-targets`,classes:{root:t.root,table:t.table},page:m,sortBy:$,order:"asc",columns:C,rows:E,pageSize:I,rowCount:r,rowsPerPageOptions:[10,50,200,500],onGlobalFilterChange:M,onSortBy:g,onPageChange:F,onRowsPerPageChange:A}),d(Je,{})]})}var Le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AssociationsVizQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ensemblId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"index"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"size"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AggregationFilter"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"target"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ensemblId"},value:{kind:"Variable",name:{kind:"Name",value:"ensemblId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associatedDiseases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"index"},value:{kind:"Variable",name:{kind:"Name",value:"index"}}},{kind:"ObjectField",name:{kind:"Name",value:"size"},value:{kind:"Variable",name:{kind:"Name",value:"size"}}}]}},{kind:"Argument",name:{kind:"Name",value:"aggregationFilters"},value:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disease"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"datatypeScores"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"componentId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:481}};Le.loc.source={body:`query AssociationsVizQuery(
  $ensemblId: String!
  $index: Int!
  $size: Int!
  $aggregationFilters: [AggregationFilter!]
) {
  target(ensemblId: $ensemblId) {
    id
    associatedDiseases(
      page: { index: $index, size: $size }
      aggregationFilters: $aggregationFilters
    ) {
      count
      rows {
        disease {
          id
          name
        }
        score
        datatypeScores {
          componentId: id
          score
        }
      }
    }
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function Ce(n,e){if(n.kind==="FragmentSpread")e.add(n.name.value);else if(n.kind==="VariableDefinition"){var t=n.type;t.kind==="NamedType"&&e.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(a){Ce(a,e)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(a){Ce(a,e)}),n.definitions&&n.definitions.forEach(function(a){Ce(a,e)})}var Xe={};(function(){Le.definitions.forEach(function(e){if(e.name){var t=new Set;Ce(e,t),Xe[e.name.value]=t}})})();function _n(n,e){for(var t=0;t<n.definitions.length;t++){var a=n.definitions[t];if(a.name&&a.name.value==e)return a}}function ri(n,e){var t={kind:n.kind,definitions:[_n(n,e)]};n.hasOwnProperty("loc")&&(t.loc=n.loc);var a=Xe[e]||new Set,i=new Set,r=new Set;for(a.forEach(function(o){r.add(o)});r.size>0;){var l=r;r=new Set,l.forEach(function(o){if(!i.has(o)){i.add(o);var s=Xe[o]||new Set;s.forEach(function(c){r.add(c)})}})}return i.forEach(function(o){var s=_n(n,o);s&&t.definitions.push(s)}),t}ri(Le,"AssociationsVizQuery");function On({ensemblId:n,symbol:e,Component:t,aggregationFilters:a}){const[i,r]=v.exports.useState(),[l,o]=v.exports.useState(),s=Xn(Le,{ensemblId:n,aggregationFilters:a},"data.target.associatedDiseases");if(v.exports.useEffect(()=>{let p=!0;const h=[fetch($e.efoURL).then(V=>V.text()),s()];return Promise.all(h).then(V=>{if(p){const $=V[0].trim().split(`
`).map(JSON.parse);r($),o(V[1])}}),()=>p=!1},[n,a]),!i||!l)return d(jn,{variant:"rect",height:"40vh"});const c=i.reduce((p,h)=>(p[h.id]=h,p),{});return d(t,{ensemblId:n,symbol:e,idToDisease:c,associations:l})}var Ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TargetFacetsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ensemblId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AggregationFilter"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"target"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ensemblId"},value:{kind:"Variable",name:{kind:"Name",value:"ensemblId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvedName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associatedDiseases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"aggregationFilters"},value:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggregations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:484}};Ee.loc.source={body:`query TargetFacetsQuery(
  $ensemblId: String!
  $aggregationFilters: [AggregationFilter!]
) {
  target(ensemblId: $ensemblId) {
    id
    approvedName
    associatedDiseases(aggregationFilters: $aggregationFilters) {
      count
      aggregations {
        uniques
        aggs {
          name
          uniques
          rows {
            key
            uniques
            aggs {
              key
              uniques
            }
          }
        }
      }
    }
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function Ve(n,e){if(n.kind==="FragmentSpread")e.add(n.name.value);else if(n.kind==="VariableDefinition"){var t=n.type;t.kind==="NamedType"&&e.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(a){Ve(a,e)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(a){Ve(a,e)}),n.definitions&&n.definitions.forEach(function(a){Ve(a,e)})}var Ye={};(function(){Ee.definitions.forEach(function(e){if(e.name){var t=new Set;Ve(e,t),Ye[e.name.value]=t}})})();function qn(n,e){for(var t=0;t<n.definitions.length;t++){var a=n.definitions[t];if(a.name&&a.name.value==e)return a}}function oi(n,e){var t={kind:n.kind,definitions:[qn(n,e)]};n.hasOwnProperty("loc")&&(t.loc=n.loc);var a=Ye[e]||new Set,i=new Set,r=new Set;for(a.forEach(function(o){r.add(o)});r.size>0;){var l=r;r=new Set,l.forEach(function(o){if(!i.has(o)){i.add(o);var s=Ye[o]||new Set;s.forEach(function(c){r.add(c)})}})}return i.forEach(function(o){var s=qn(n,o);s&&t.definitions.push(s)}),t}oi(Ee,"TargetFacetsQuery");function $i({ensgId:n,symbol:e}){var p;const t=qt(),a=zt(),[i,r]=v.exports.useState([]),{loading:l,data:o}=Mt(Ee,{variables:{ensemblId:n,aggregationFilters:i}}),s=h=>{r(h)},c=(p=o==null?void 0:o.target)==null?void 0:p.associatedDiseases.aggregations.aggs;return x(ne,{style:{marginTop:"8px"},container:!0,spacing:2,children:[d(ne,{item:!0,xs:12,children:d(ae,{variant:"h6",children:o?x(ie,{children:[x("strong",{children:[o.target.associatedDiseases.count," diseases or phenotypes"]})," ","associated with ",d("strong",{children:e})]}):d("strong",{children:"Loading..."})})})," ",d(ne,{item:!0,xs:12,lg:3,children:d(yn,{elevation:0,children:d(wn,{children:d(Jt,{loading:l,data:c,onChange:s,type:"disease"})})})}),x(ne,{item:!0,xs:12,lg:9,children:[x(Pt,{value:a.pathname,children:[d(Me,{component:Ne,value:t.url,label:"Table",to:t.url}),d(Me,{component:Ne,value:`${t.url}/bubbles`,label:"Bubbles",to:`${t.url}/bubbles`}),d(Me,{component:Ne,value:`${t.url}/graph`,label:"Graph",to:`${t.url}/graph`})]}),d(yn,{elevation:0,style:{overflow:"visible"},children:d(wn,{children:x(Bt,{children:[d(Pe,{path:`${t.path}/bubbles`,children:d(On,{ensemblId:n,symbol:e,Component:Za,aggregationFilters:i})}),d(Pe,{path:`${t.path}/graph`,children:d(On,{ensemblId:n,symbol:e,Component:Xa,aggregationFilters:i})}),d(Pe,{path:t.path,children:d(ii,{ensgId:n,aggregationFilters:i})})]})})})]})]})}export{$i as default};
