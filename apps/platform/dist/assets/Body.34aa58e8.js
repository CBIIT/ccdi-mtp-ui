var ma=Object.defineProperty,ya=Object.defineProperties;var va=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var ir=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable;var sr=(e,t,n)=>t in e?ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))ir.call(t,n)&&sr(e,n,t[n]);if($t)for(var n of $t(t))cr.call(t,n)&&sr(e,n,t[n]);return e},ne=(e,t)=>ya(e,va(t));var Lt=(e,t)=>{var n={};for(var r in e)ir.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$t)for(var r of $t(e))t.indexOf(r)<0&&cr.call(e,r)&&(n[r]=e[r]);return n};import{w as Br,q as kn,r as fe,_ as Fr,$ as Or,s as vn,x as Sa,m as rt,a as C,L as Je,aj as mt,j as he,b as Sn,W as ba,ao as De,T as yt,I as _a,au as Ra,av as wa,aU as ln,an as Mn,aV as lr,ai as kt,af as Ta,al as Ea,R as pe,aA as Aa,aP as Ca,aG as Na,ad as Mt,G as Va,C as Ut,X as bn}from"./index.ec2996a9.js";import{a as jr,g as $a,h as La}from"./urls.4a718162.js";import{A as ka,a as Ma,d as Da,b as Ia}from"./graphiql.min.35449f36.js";import{d as Pa,M as xa,D as Ua,a as zr,g as qr}from"./TableDrawer.dc5a9538.js";import{u as Wr}from"./TablePagination.6ed57057.js";import{F as Ba}from"./FormGroup.c3f2d311.js";import{F as Fa,C as Oa}from"./FormControlLabel.47f62ae2.js";var ja=function(t){return{root:kn({color:t.palette.text.secondary},t.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:t.palette.primary.main},"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),colorSecondary:{"&$focused":{color:t.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:t.palette.error.main}}}},za=fe.exports.forwardRef(function(t,n){var r=t.children,o=t.classes,a=t.className;t.color;var s=t.component,c=s===void 0?"label":s;t.disabled,t.error,t.filled,t.focused,t.required;var d=Fr(t,["children","classes","className","color","component","disabled","error","filled","focused","required"]),f=Wr(),u=Or({props:t,muiFormControl:f,states:["color","required","focused","disabled","error","filled"]});return fe.exports.createElement(c,kn({className:vn(o.root,o["color".concat(Sa(u.color||"primary"))],a,u.disabled&&o.disabled,u.error&&o.error,u.filled&&o.filled,u.focused&&o.focused,u.required&&o.required),ref:n},d),r,u.required&&fe.exports.createElement("span",{"aria-hidden":!0,className:vn(o.asterisk,u.error&&o.error)},"\u2009","*"))}),qa=Br(ja,{name:"MuiFormLabel"})(za),Wa=function(t){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:t.transitions.create(["color","transform"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}},Ga=fe.exports.forwardRef(function(t,n){var r=t.classes,o=t.className,a=t.disableAnimation,s=a===void 0?!1:a;t.margin;var c=t.shrink;t.variant;var d=Fr(t,["classes","className","disableAnimation","margin","shrink","variant"]),f=Wr(),u=c;typeof u=="undefined"&&f&&(u=f.filled||f.focused||f.adornedStart);var m=Or({props:t,muiFormControl:f,states:["margin","variant"]});return fe.exports.createElement(qa,kn({"data-shrink":u,className:vn(r.root,o,f&&r.formControl,!s&&r.animated,u&&r.shrink,m.margin==="dense"&&r.marginDense,{filled:r.filled,outlined:r.outlined}[m.variant]),classes:{focused:r.focused,disabled:r.disabled,error:r.error,required:r.required,asterisk:r.asterisk},ref:n},d))}),Ha=Br(Wa,{name:"MuiInputLabel"})(Ga);const Ka=rt(e=>({drawerLink:{cursor:"pointer"},drawerBody:{overflowY:"overlay"},drawerModal:{"& .MuiBackdrop-root":{opacity:"0 !important"}},drawerPaper:{backgroundColor:e.palette.grey[300]},drawerTitle:{borderBottom:"1px solid #ccc",padding:"1rem"},drawerTitleCaption:{color:e.palette.grey[700],fontSize:"1.2rem",fontWeight:"bold"},AccordionExpanded:{margin:"1rem !important"},AccordionRoot:{border:"1px solid #ccc",margin:"1rem 1rem 0 1rem",padding:"1rem","&::before":{backgroundColor:"transparent"}},AccordionSubtitle:{color:e.palette.grey[400],fontSize:"0.8rem",fontStyle:"italic"},AccordionTitle:{color:e.palette.grey[700],fontSize:"1rem",fontWeight:"bold"},summaryBoxRoot:{marginRight:"2rem"}})),Ze=e=>({ATC:"ATC",ClinicalTrials:"ClinicalTrials.gov",DailyMed:"DailyMed",FDA:"FDA"})[e],Za=(e,t)=>e==="ClinicalTrials"?t.split("%22")[1]||`${Ze(e)} reference`:e==="DailyMed"?t.split("setid=")[1]||`${Ze(e)} reference`:e==="FDA"?t.split("set_id:")[1]||`${Ze(e)} reference`:e==="ATC"?t.split("code=")[1]||`${Ze(e)} reference`:`${t.name} entry`;function Xa({references:e}){const[t,n]=fe.exports.useState(!1),r=Ka();if(e.length===0)return"N/A";if(e.length===1)return C(Je,{external:!0,to:e[0].url,children:Ze(e[0].name)});const o=mt.groupBy(e,"name"),a=d=>{d.type==="keydown"&&(d.key==="Tab"||d.key==="Shift")||n(!0)},s=()=>{n(!1)},c=he(Sn,{children:[C(ba,{classes:{root:r.drawerTitle},elevation:0,children:he(De,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[C(yt,{className:r.drawerTitleCaption,children:"Records"}),C(_a,{onClick:s,children:C(Pa,{})})]})}),C(De,{className:r.drawerBody,children:Object.keys(o).map(d=>he(ka,{elevation:0,classes:{root:r.AccordionRoot,expanded:r.AccordionExpanded},defaultExpanded:o[d].length<10||Object.keys(o).length===1,children:[C(Ma,{expandIcon:C(Da,{}),children:he(De,{classes:{root:r.summaryBoxRoot},children:[C(yt,{className:r.AccordionTitle,children:Ze(d)}),he(yt,{className:r.AccordionSubtitle,children:[o[d].length," references"]})]})}),C(Ia,{children:C(Ra,{children:o[d].map((f,u)=>C(wa,{children:C(Je,{external:!0,to:f.url,children:Za(f.name,f.url)})},u))})})]},d))})]});return he(Sn,{children:[he(xa,{onClick:a,className:r.drawerLink,children:[e.length," references"]}),C(Ua,{anchor:"right",classes:{modal:r.drawerModal,paper:r.drawerPaper},open:t,onClose:s,children:c})]})}const ur=(e,t)=>mt.get(e,t,[]);function Ja(e,t,n,r="rows",o="count"){const a=`${n}.${r}`,s=`${n}.cursor`,c=`${n}.${o}`,d=async(f,u)=>Mn.query({query:e,variables:W({cursor:f,size:u},t)});return async function(){const u=await d(null,ln),m=[...ur(u,a)],k=mt.get(u,c,0),P=Math.ceil(k/ln);let R=mt.get(u,s,null),L=1;for(;L<P;){const g=await d(R,ln);R=mt.get(g,s,null),m.push(...ur(g,a)),L++}return m}}function Qa(e,t){return{clinicalTrials:{label:"Clinical trials information",columns:[{id:"phase",label:"Phase",sortable:!0,renderCell:({phase:n})=>lr[n],filterValue:({phase:n})=>lr[n]},{id:"status",renderCell:n=>n.status?n.status:kt},{id:"sources",label:"Source",exportValue:n=>n.urls.map(r=>r.url),renderCell:n=>C(Xa,{references:n.urls})}]},disease:{label:"Disease information",columns:[{id:"disease",propertyPath:"disease.id",renderCell:n=>C(Je,{to:`/disease/${n.disease.id}`,children:n.disease.name})}]},drug:{label:"Drug information",columns:[{id:"drug",propertyPath:"drug.id",renderCell:n=>n.drug?C(Je,{to:`/drug/${n.drug.id}`,children:n.drug.name}):kt},{id:"type",propertyPath:"drugType",renderCell:n=>n.drugType},{id:"mechanismOfAction"},{id:"Action type",renderCell:({drug:{mechanismsOfAction:n},target:r})=>{if(!n)return kt;const o=new Set,a=t==="target"?e:r.id;n.rows.forEach(c=>{c.targets.forEach(d=>{d.id===a&&o.add(c.actionType)})});const s=Array.from(o);return s.length>0?C("ul",{style:{margin:0,padding:0,listStyle:"none"},children:s.map(c=>C("li",{children:Ta(c)},c))}):kt}}]},target:{label:"Target information",columns:[{id:"targetSymbol",label:"Symbol",propertyPath:"target.approvedSymbol",renderCell:n=>C(Je,{to:`/target/${n.target.id}`,children:n.target.approvedSymbol})},{id:"targetName",label:"Name",propertyPath:"target.approvedName",hidden:["lgDown"],renderCell:n=>n.target.approvedName}]}}}const dr=10;function Bh({definition:e,entity:t,variables:n,BODY_QUERY:r,Description:o,columnsToShow:a,stickyColumn:s,exportColumns:c}){const[d,f]=fe.exports.useState(!0),[u,m]=fe.exports.useState(!1),[k,P]=fe.exports.useState(0),[R,L]=fe.exports.useState(""),[g,S]=fe.exports.useState([]),[N,T]=fe.exports.useState(0),[V,F]=fe.exports.useState(dr),[j,z]=fe.exports.useState(""),U=n[Object.keys(n)[0]],oe=Qa(U,t),de=[];a.forEach(B=>{de.push(...oe[B].columns.map(Y=>Y.id===s?ne(W({},Y),{sticky:!0}):Y))});const Se=[...a.map(B=>({colspan:oe[B].columns.length,label:oe[B].label}))],G=(B,Y,me,ae)=>Mn.query({query:r,variables:ne(W({},B),{cursor:Y,size:me*10,freeTextQuery:ae})});fe.exports.useEffect(()=>{let B=!0;return G(n,null,dr).then(Y=>{const{cursor:me,count:ae,rows:Ee}=Y.data[t].knownDrugs;B&&(f(!1),L(me),P(ae),S(Ee))}),()=>{B=!1}},[n]);const H=Ja(r,ne(W({},n),{freeTextQuery:j}),`data[${t}].knownDrugs`),ve=B=>{V*B+V>g.length&&R!==null?(m(!0),G(n,R,V,j).then(Y=>{const{cursor:me,rows:ae}=Y.data[t].knownDrugs;m(!1),L(me),T(B),S([...g,...ae])})):T(B)},ie=B=>{B>g.length&&R!==null?(m(!0),G(n,R,B,j).then(Y=>{const{cursor:me,rows:ae}=Y.data[t].knownDrugs;m(!1),L(me),T(0),F(B),S([...g,...ae])})):(T(0),F(B))},ge=B=>{m(!0),G(n,null,V,B).then(Y=>{var x;const{cursor:me,count:ae,rows:Ee=[]}=(x=Y.data[t].knownDrugs)!=null?x:{};m(!1),T(0),L(me),P(ae),z(B),S(Ee)})};return C(jr,{definition:e,request:{loading:d,error:!1,data:g},renderDescription:o,renderBody:()=>C(zr,{loading:u,stickyHeader:!0,showGlobalFilter:!0,globalFilter:j,dataDownloader:!0,dataDownloaderRows:H,dataDownloaderFileStem:`${U}-known-drugs`,headerGroups:Se,columns:de,rows:qr(g,N,V),rowCount:k,rowsPerPageOptions:[10,25,100],page:N,pageSize:V,onGlobalFilterChange:ge,onPageChange:ve,onRowsPerPageChange:ie,dataDownloaderColumns:c,query:r.loc.source.body,variables:n})})}Ea`
  fragment SimilarEntitiesDisease on Disease {
    similarEntities(threshold: 0.5, size: 20) {
      score
    }
  }
`;function Ya(e){return!!e&&typeof e.then=="function"}var se=Ya;function es(e,t){if(e!=null)return e;throw new Error(t!=null?t:"Got unexpected null or undefined")}var q=es;class Gr{}const ts=new Gr,Dn={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if(this.state==="hasError")return this;if(this.state==="hasValue")try{const n=e(this.contents);return se(n)?Qe(n):In(n)}catch(n){return se(n)?Qe(n.next(()=>e(this.contents))):Pn(n)}if(this.state==="loading")return Qe(this.contents.then(e).catch(n=>{if(se(n))return n.then(()=>e(this.contents));throw n}));throw new Error("Invalid Loadable state")}};function In(e){return Object.freeze(ne(W({state:"hasValue",contents:e},Dn),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function Pn(e){return Object.freeze(ne(W({state:"hasError",contents:e},Dn),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function Qe(e){return Object.freeze(ne(W({state:"loading",contents:e},Dn),{getValue(){throw this.contents.then(({__value:t})=>t)},toPromise(){return this.contents.then(({__value:t})=>t)},promiseMaybe(){return this.contents.then(({__value:t})=>t)},promiseOrThrow(){return this.contents.then(({__value:t})=>t)}}))}function ns(){return Qe(new Promise(()=>{}))}function rs(e){return e.every(t=>t.state==="hasValue")?In(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?Pn(q(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Qe(Promise.all(e.map(t=>t.contents)).then(t=>({__value:t})))}var Gt={loadableWithValue:In,loadableWithError:Pn,loadableWithPromise:Qe,loadableLoading:ns,loadableAll:rs,Canceled:Gr,CANCELED:ts};function os(e,t,{error:n}={}){return null}var as=os,ss=as;function is(e,t){const n=new Set(e);return n.add(t),n}function cs(e,t){const n=new Set(e);return n.delete(t),n}function ls(e,t,n){const r=new Map(e);return r.set(t,n),r}function us(e,t,n){const r=new Map(e);return r.set(t,n(r.get(t))),r}function ds(e,t){const n=new Map(e);return n.delete(t),n}function fs(e,t){const n=new Map(e);return t.forEach(r=>n.delete(r)),n}var Hr={setByAddingToSet:is,setByDeletingFromSet:cs,mapBySettingInMap:ls,mapByUpdatingInMap:us,mapByDeletingFromMap:ds,mapByDeletingMultipleFromMap:fs};function*hs(e,t){let n=0;for(const r of e)t(r,n++)&&(yield r)}var Kr=hs;const xn=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0);function Un(e){var t;return(t=xn.get(e))!==null&&t!==void 0?t:!1}Un.setPass=e=>{xn.set(e,!0)};Un.setFail=e=>{xn.set(e,!1)};var re=Un;function ps(e,t){return function*(){let n=0;for(const r of e)yield t(r,n++)}()}var Zr=ps;function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Bn{constructor(t){K(this,"key",void 0),this.key=t}}class Xr extends Bn{}class Jr extends Bn{}function gs(e){return e instanceof Xr||e instanceof Jr}var Ht={AbstractRecoilValue:Bn,RecoilState:Xr,RecoilValueReadOnly:Jr,isRecoilValue:gs},ms=Ht.AbstractRecoilValue,ys=Ht.RecoilState,vs=Ht.RecoilValueReadOnly,Ss=Ht.isRecoilValue,ze=Object.freeze({__proto__:null,AbstractRecoilValue:ms,RecoilState:ys,RecoilValueReadOnly:vs,isRecoilValue:Ss});class Qr{}const bs=new Qr;class _s extends Error{constructor(t){super(`Tried to set the value of Recoil selector ${t} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}}const qe=new Map,Fn=new Map;function Rs(e){return Zr(e,t=>q(Fn.get(t)))}function ws(e){if(qe.has(e.key)){const n=`Duplicate atom key "${e.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(n)}qe.set(e.key,e);const t=e.set==null?new ze.RecoilValueReadOnly(e.key):new ze.RecoilState(e.key);return Fn.set(e.key,t),t}class Yr extends Error{}function Ts(e){const t=qe.get(e);if(t==null)throw new Yr(`Missing definition for RecoilValue: "${e}""`);return t}function Es(e){return qe.get(e)}const Bt=new Map;function As(e){var t;if(!re("recoil_memory_managament_2020"))return;const n=qe.get(e);if(!(n==null||(t=n.shouldDeleteConfigOnRelease)===null||t===void 0)&&t.call(n)){var r;qe.delete(e),(r=eo(e))===null||r===void 0||r(),Bt.delete(e)}}function Cs(e,t){!re("recoil_memory_managament_2020")||(t===void 0?Bt.delete(e):Bt.set(e,t))}function eo(e){return Bt.get(e)}var $e={nodes:qe,recoilValues:Fn,registerNode:ws,getNode:Ts,getNodeMaybe:Es,deleteNodeConfigIfPossible:As,setConfigDeletionHandler:Cs,getConfigDeletionHandler:eo,recoilValuesForKeys:Rs,NodeMissingError:Yr,DefaultValue:Qr,DEFAULT_VALUE:bs,RecoilValueNotReady:_s};class to{}function Ns(){return new to}var Kt={RetentionZone:to,retentionZone:Ns};const{setByAddingToSet:Vs}=Hr,{getNode:Zt,getNodeMaybe:$s,recoilValuesForKeys:fr}=$e,{RetentionZone:hr}=Kt,Ls=Object.freeze(new Set);class ks extends Error{}function Ms(e,t,n){if(!re("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=e.getState().retention;function o(a){let s=r.get(a);s||r.set(a,s=new Set),s.add(t)}if(n instanceof hr)o(n);else if(Array.isArray(n))for(const a of n)o(a);return()=>{if(!re("recoil_memory_managament_2020"))return;const a=e.getState().retention.nodesRetainedByZone;function s(c){const d=a.get(c);d&&d.delete(t),d&&d.size===0&&a.delete(c)}if(n instanceof hr)s(n);else if(Array.isArray(n))for(const c of n)s(c)}}function On(e,t,n,r){const o=e.getState();if(o.nodeCleanupFunctions.has(n))return;const a=Zt(n),s=Ms(e,n,a.retainedBy),c=a.init(e,t,r);o.nodeCleanupFunctions.set(n,()=>{c(),s()})}function Ds(e,t){var n;const r=e.getState();(n=r.nodeCleanupFunctions.get(t))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(t)}function Is(e,t,n){return On(e,t,n,"get"),Zt(n).get(e,t)}function no(e,t,n){return Zt(n).peek(e,t)}function Ps(e,t,n){var r;const o=$s(t);return o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),ne(W({},e),{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:Vs(e.dirtyAtoms,t)})}function xs(e,t,n,r){const o=Zt(n);if(o.set==null)throw new ks(`Attempt to set read-only RecoilValue: ${n}`);const a=o.set;return On(e,t,n,"set"),a(e,t,r)}function Us(e,t,n){var r,o,a;const s=e.getState(),c=e.getGraph(t.version),d=s.knownAtoms.has(n)?"atom":s.knownSelectors.has(n)?"selector":void 0,f=Kr(ro(e,t,new Set([n])),u=>u!==n);return{loadable:no(e,t,n),isActive:s.knownAtoms.has(n)||s.knownSelectors.has(n),isSet:d==="selector"?!1:t.atomValues.has(n),isModified:t.dirtyAtoms.has(n),type:d,deps:fr((r=c.nodeDeps.get(n))!==null&&r!==void 0?r:[]),subscribers:{nodes:fr(f),components:Zr((o=(a=s.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([u])=>({name:u}))}}}function ro(e,t,n){const r=new Set,o=Array.from(n),a=e.getGraph(t.version);for(let c=o.pop();c;c=o.pop()){var s;r.add(c);const d=(s=a.nodeToNodeSubscriptions.get(c))!==null&&s!==void 0?s:Ls;for(const f of d)r.has(f)||o.push(f)}return r}var ot={getNodeLoadable:Is,peekNodeLoadable:no,setNodeValue:xs,cleanUpNode:Ds,setUnvalidatedAtomValue_DEPRECATED:Ps,peekNodeInfo:Us,getDownstreamNodes:ro,initializeNodeIfNewToStore:On};const{CANCELED:Bs}=Gt,{getDownstreamNodes:Fs,getNodeLoadable:oo,setNodeValue:Os}=ot,{getNodeMaybe:ao}=$e,{DefaultValue:jn,RecoilValueNotReady:js}=$e,{AbstractRecoilValue:zs,RecoilState:qs,RecoilValueReadOnly:Ws,isRecoilValue:Gs}=ze;function Hs(e,{key:t},n=e.getState().currentTree){var r,o;const a=e.getState();n.version===a.currentTree.version||n.version===((r=a.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(o=a.previousTree)===null||o===void 0||o.version);const s=oo(e,n,t);return s.state==="loading"&&s.contents.catch(()=>Bs),s}function Ks(e,t){const n=e.clone();return t.forEach((r,o)=>{r.state==="hasValue"&&r.contents instanceof jn?n.delete(o):n.set(o,r)}),n}function Zs(e,t,{key:n},r){if(typeof r=="function"){const o=oo(e,t,n);if(o.state==="loading")throw new js(n);if(o.state==="hasError")throw o.contents;return r(o.contents)}else return r}function Xs(e,t,n){if(n.type==="set"){const{recoilValue:o,valueOrUpdater:a}=n,s=Zs(e,t,o,a),c=Os(e,t,o.key,s);for(const[d,f]of c.entries())pr(t,d,f)}else if(n.type==="setLoadable"){const{recoilValue:{key:o},loadable:a}=n;pr(t,o,a)}else if(n.type==="markModified"){const{recoilValue:{key:o}}=n;t.dirtyAtoms.add(o)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:o},unvalidatedValue:a}=n,s=ao(o);s==null||(r=s.invalidate)===null||r===void 0||r.call(s,t),t.atomValues.delete(o),t.nonvalidatedAtoms.set(o,a),t.dirtyAtoms.add(o)}else ss(`Unknown action ${n.type}`)}function pr(e,t,n){n.state==="hasValue"&&n.contents instanceof jn?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function so(e,t){e.replaceState(n=>{const r=Qs(n);for(const o of t)Xs(e,r,o);return io(e,r),r})}function Xt(e,t){if(vt.length){const n=vt[vt.length-1];let r=n.get(e);r||n.set(e,r=[]),r.push(t)}else so(e,[t])}const vt=[];function Js(){const e=new Map;return vt.push(e),()=>{for(const[t,n]of e)so(t,n);vt.pop()}}function Qs(e){return ne(W({},e),{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function io(e,t){const n=Fs(e,t,t.dirtyAtoms);for(const a of n){var r,o;(r=ao(a))===null||r===void 0||(o=r.invalidate)===null||o===void 0||o.call(r,t)}}function co(e,t,n){Xt(e,{type:"set",recoilValue:t,valueOrUpdater:n})}function Ys(e,t,n){if(n instanceof jn)return co(e,t,n);Xt(e,{type:"setLoadable",recoilValue:t,loadable:n})}function ei(e,t){Xt(e,{type:"markModified",recoilValue:t})}function ti(e,t,n){Xt(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})}let ni=0;function ri(e,{key:t},n,r=null){const o=ni++,a=e.getState();return a.nodeToComponentSubscriptions.has(t)||a.nodeToComponentSubscriptions.set(t,new Map),q(a.nodeToComponentSubscriptions.get(t)).set(o,[r!=null?r:"<not captured>",n]),{release:()=>{const s=e.getState(),c=s.nodeToComponentSubscriptions.get(t);c===void 0||!c.has(o)||(c.delete(o),c.size===0&&s.nodeToComponentSubscriptions.delete(t))}}}var at={RecoilValueReadOnly:Ws,AbstractRecoilValue:zs,RecoilState:qs,getRecoilValueAsLoadable:Hs,setRecoilValue:co,setRecoilValueLoadable:Ys,markRecoilValueModified:ei,setUnvalidatedRecoilValue:ti,subscribeToRecoilValue:ri,isRecoilValue:Gs,applyAtomValueWrites:Ks,batchStart:Js,invalidateDownstreams_FOR_TESTING:io};const{unstable_batchedUpdates:oi}=Aa;var ai={unstable_batchedUpdates:oi};const{unstable_batchedUpdates:si}=ai;var ii={unstable_batchedUpdates:si};const{batchStart:ci}=at,{unstable_batchedUpdates:li}=ii;let zn=li;const ui=e=>{zn=e},di=()=>zn,fi=e=>{zn(()=>{let t=()=>{};try{t=ci(),e()}finally{t()}})};var qn={getBatcher:di,setBatcher:ui,batchUpdates:fi};function hi(e,t){t()}var pi={enqueueExecution:hi};function gi(e,...t){const n=new Set;e:for(const r of e){for(const o of t)if(o.has(r))continue e;n.add(r)}return n}var Ft=gi;function mi(e,t){const n=new Map;return e.forEach((r,o)=>{n.set(o,t(r,o))}),n}var Ot=mi;function yi(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function vi(e){return{nodeDeps:Ot(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:Ot(e.nodeToNodeSubscriptions,t=>new Set(t))}}function un(e,t,n){const{nodeDeps:r,nodeToNodeSubscriptions:o}=t;e.forEach((a,s)=>{const c=r.get(s);if(c&&n&&c!==n.nodeDeps.get(s))return;r.set(s,new Set(a)),(c==null?a:Ft(a,c)).forEach(f=>{o.has(f)||o.set(f,new Set),q(o.get(f)).add(s)}),c&&Ft(c,a).forEach(u=>{if(!o.has(u))return;const m=q(o.get(u));m.delete(s),m.size===0&&o.delete(u)})})}function Si(e,t,n){var r,o,a,s;const c=t.getState();n===c.currentTree.version||n===((r=c.nextTree)===null||r===void 0?void 0:r.version)||((o=c.previousTree)===null||o===void 0||o.version);const d=t.getGraph(n);if(un(e,d),n===((a=c.previousTree)===null||a===void 0?void 0:a.version)){const u=t.getGraph(c.currentTree.version);un(e,u,d)}if(n===((s=c.previousTree)===null||s===void 0?void 0:s.version)||n===c.currentTree.version){var f;const u=(f=c.nextTree)===null||f===void 0?void 0:f.version;if(u!==void 0){const m=t.getGraph(u);un(e,m,d)}}}function bi(e,t){e.forEach((n,r)=>{t.has(r)||t.set(r,new Set);const o=q(t.get(r));n.forEach(a=>o.add(a))})}function _i(e,t,n){n.has(e)||n.set(e,new Set),q(n.get(e)).add(t)}var Rt={addToDependencyMap:_i,cloneGraph:vi,graph:yi,mergeDepsIntoDependencyMap:bi,saveDependencyMapToStore:Si};function Ri(e,t){return t={exports:{}},e(t,t.exports),t.exports}var wi=Ri(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},n={},r=5,o=Math.pow(2,r),a=o-1,s=o/2,c=o/4,d={},f=function(i){return function(){return i}},u=n.hash=function(l){var i=typeof l=="undefined"?"undefined":t(l);if(i==="number")return l;i!=="string"&&(l+="");for(var p=0,b=0,_=l.length;b<_;++b){var E=l.charCodeAt(b);p=(p<<5)-p+E|0}return p},m=function(i){return i-=i>>1&1431655765,i=(i&858993459)+(i>>2&858993459),i=i+(i>>4)&252645135,i+=i>>8,i+=i>>16,i&127},k=function(i,p){return p>>>i&a},P=function(i){return 1<<i},R=function(i,p){return m(i&p-1)},L=function(i,p,b,_){var E=_;if(!i){var I=_.length;E=new Array(I);for(var M=0;M<I;++M)E[M]=_[M]}return E[p]=b,E},g=function(i,p,b){var _=b.length-1,E=0,I=0,M=b;if(i)E=I=p;else for(M=new Array(_);E<p;)M[I++]=b[E++];for(++E;E<=_;)M[I++]=b[E++];return i&&(M.length=_),M},S=function(i,p,b,_){var E=_.length;if(i){for(var I=E;I>=p;)_[I--]=_[I];return _[p]=b,_}for(var M=0,D=0,O=new Array(E+1);M<p;)O[D++]=_[M++];for(O[p]=b;M<E;)O[++D]=_[M++];return O},N=1,T=2,V=3,F=4,j={__hamt_isEmpty:!0},z=function(i){return i===j||i&&i.__hamt_isEmpty},U=function(i,p,b,_){return{type:N,edit:i,hash:p,key:b,value:_,_modify:Y}},oe=function(i,p,b){return{type:T,edit:i,hash:p,children:b,_modify:me}},de=function(i,p,b){return{type:V,edit:i,mask:p,children:b,_modify:ae}},Se=function(i,p,b){return{type:F,edit:i,size:p,children:b,_modify:Ee}},G=function(i){return i===j||i.type===N||i.type===T},H=function(i,p,b,_,E){for(var I=[],M=_,D=0,O=0;M;++O)M&1&&(I[O]=E[D++]),M>>>=1;return I[p]=b,Se(i,D+1,I)},ve=function(i,p,b,_){for(var E=new Array(p-1),I=0,M=0,D=0,O=_.length;D<O;++D)if(D!==b){var te=_[D];te&&!z(te)&&(E[I++]=te,M|=1<<D)}return de(i,M,E)},ie=function l(i,p,b,_,E,I){if(b===E)return oe(i,b,[I,_]);var M=k(p,b),D=k(p,E);return de(i,P(M)|P(D),M===D?[l(i,p+r,b,_,E,I)]:M<D?[_,I]:[I,_])},ge=function(i,p,b,_,E,I,M,D){for(var O=E.length,te=0;te<O;++te){var _e=E[te];if(b(M,_e.key)){var ue=_e.value,we=I(ue);return we===ue?E:we===d?(--D.value,g(i,te,E)):L(i,te,U(p,_,M,we),E)}}var Ce=I();return Ce===d?E:(++D.value,L(i,O,U(p,_,M,Ce),E))},B=function(i,p){return i===p.edit},Y=function(i,p,b,_,E,I,M){if(p(I,this.key)){var D=_(this.value);return D===this.value?this:D===d?(--M.value,j):B(i,this)?(this.value=D,this):U(i,E,I,D)}var O=_();return O===d?this:(++M.value,ie(i,b,this.hash,this,E,U(i,E,I,O)))},me=function(i,p,b,_,E,I,M){if(E===this.hash){var D=B(i,this),O=ge(D,i,p,this.hash,this.children,_,I,M);return O===this.children?this:O.length>1?oe(i,this.hash,O):O[0]}var te=_();return te===d?this:(++M.value,ie(i,b,this.hash,this,E,U(i,E,I,te)))},ae=function(i,p,b,_,E,I,M){var D=this.mask,O=this.children,te=k(b,E),_e=P(te),ue=R(D,_e),we=D&_e,Ce=we?O[ue]:j,He=Ce._modify(i,p,b+r,_,E,I,M);if(Ce===He)return this;var Vt=B(i,this),it=D,ct=void 0;if(we&&z(He)){if(it&=~_e,!it)return j;if(O.length<=2&&G(O[ue^1]))return O[ue^1];ct=g(Vt,ue,O)}else if(!we&&!z(He)){if(O.length>=s)return H(i,te,He,D,O);it|=_e,ct=S(Vt,ue,He,O)}else ct=L(Vt,ue,He,O);return Vt?(this.mask=it,this.children=ct,this):de(i,it,ct)},Ee=function(i,p,b,_,E,I,M){var D=this.size,O=this.children,te=k(b,E),_e=O[te],ue=(_e||j)._modify(i,p,b+r,_,E,I,M);if(_e===ue)return this;var we=B(i,this),Ce=void 0;if(z(_e)&&!z(ue))++D,Ce=L(we,te,ue,O);else if(!z(_e)&&z(ue)){if(--D,D<=c)return ve(i,D,te,O);Ce=L(we,te,j,O)}else Ce=L(we,te,ue,O);return we?(this.size=D,this.children=Ce,this):Se(i,D,Ce)};j._modify=function(l,i,p,b,_,E,I){var M=b();return M===d?j:(++I.value,U(l,_,E,M))};function x(l,i,p,b,_){this._editable=l,this._edit=i,this._config=p,this._root=b,this._size=_}x.prototype.setTree=function(l,i){return this._editable?(this._root=l,this._size=i,this):l===this._root?this:new x(this._editable,this._edit,this._config,l,i)};var Ae=n.tryGetHash=function(l,i,p,b){for(var _=b._root,E=0,I=b._config.keyEq;;)switch(_.type){case N:return I(p,_.key)?_.value:l;case T:{if(i===_.hash)for(var M=_.children,D=0,O=M.length;D<O;++D){var te=M[D];if(I(p,te.key))return te.value}return l}case V:{var _e=k(E,i),ue=P(_e);if(_.mask&ue){_=_.children[R(_.mask,ue)],E+=r;break}return l}case F:{if(_=_.children[k(E,i)],_){E+=r;break}return l}default:return l}};x.prototype.tryGetHash=function(l,i,p){return Ae(l,i,p,this)};var Oe=n.tryGet=function(l,i,p){return Ae(l,p._config.hash(i),i,p)};x.prototype.tryGet=function(l,i){return Oe(l,i,this)};var h=n.getHash=function(l,i,p){return Ae(void 0,l,i,p)};x.prototype.getHash=function(l,i){return h(l,i,this)},n.get=function(l,i){return Ae(void 0,i._config.hash(l),l,i)},x.prototype.get=function(l,i){return Oe(i,l,this)};var v=n.has=function(l,i,p){return Ae(d,l,i,p)!==d};x.prototype.hasHash=function(l,i){return v(l,i,this)};var y=n.has=function(l,i){return v(i._config.hash(l),l,i)};x.prototype.has=function(l){return y(l,this)};var $=function(i,p){return i===p};n.make=function(l){return new x(0,0,{keyEq:l&&l.keyEq||$,hash:l&&l.hash||u},j,0)},n.empty=n.make();var A=n.isEmpty=function(l){return l&&!!z(l._root)};x.prototype.isEmpty=function(){return A(this)};var w=n.modifyHash=function(l,i,p,b){var _={value:b._size},E=b._root._modify(b._editable?b._edit:NaN,b._config.keyEq,0,l,i,p,_);return b.setTree(E,_.value)};x.prototype.modifyHash=function(l,i,p){return w(p,l,i,this)};var Z=n.modify=function(l,i,p){return w(l,p._config.hash(i),i,p)};x.prototype.modify=function(l,i){return Z(i,l,this)};var ce=n.setHash=function(l,i,p,b){return w(f(p),l,i,b)};x.prototype.setHash=function(l,i,p){return ce(l,i,p,this)};var le=n.set=function(l,i,p){return ce(p._config.hash(l),l,i,p)};x.prototype.set=function(l,i){return le(l,i,this)};var X=f(d),ee=n.removeHash=function(l,i,p){return w(X,l,i,p)};x.prototype.removeHash=x.prototype.deleteHash=function(l,i){return ee(l,i,this)};var be=n.remove=function(l,i){return ee(i._config.hash(l),l,i)};x.prototype.remove=x.prototype.delete=function(l){return be(l,this)};var Ge=n.beginMutation=function(l){return new x(l._editable+1,l._edit+1,l._config,l._root,l._size)};x.prototype.beginMutation=function(){return Ge(this)};var Me=n.endMutation=function(l){return l._editable=l._editable&&l._editable-1,l};x.prototype.endMutation=function(){return Me(this)};var ke=n.mutate=function(l,i){var p=Ge(i);return l(p),Me(p)};x.prototype.mutate=function(l){return ke(l,this)};var Re=function(i){return i&&st(i[0],i[1],i[2],i[3],i[4])},st=function(i,p,b,_,E){for(;b<i;){var I=p[b++];if(I&&!z(I))return or(I,_,[i,p,b,_,E])}return Re(E)},or=function(i,p,b){switch(i.type){case N:return{value:p(i),rest:b};case T:case F:case V:var _=i.children;return st(_.length,_,0,p,b);default:return Re(b)}},ia={done:!0};function sn(l){this.v=l}sn.prototype.next=function(){if(!this.v)return ia;var l=this.v;return this.v=Re(l.rest),l},sn.prototype[Symbol.iterator]=function(){return this};var cn=function(i,p){return new sn(or(i._root,p))},ca=function(i){return[i.key,i.value]},la=n.entries=function(l){return cn(l,ca)};x.prototype.entries=x.prototype[Symbol.iterator]=function(){return la(this)};var ua=function(i){return i.key},da=n.keys=function(l){return cn(l,ua)};x.prototype.keys=function(){return da(this)};var fa=function(i){return i.value},ha=n.values=x.prototype.values=function(l){return cn(l,fa)};x.prototype.values=function(){return ha(this)};var ar=n.fold=function(l,i,p){var b=p._root;if(b.type===N)return l(i,b.value,b.key);for(var _=[b.children],E=void 0;E=_.pop();)for(var I=0,M=E.length;I<M;){var D=E[I++];D&&D.type&&(D.type===N?i=l(i,D.value,D.key):_.push(D.children))}return i};x.prototype.fold=function(l,i){return ar(l,i,this)};var pa=n.forEach=function(l,i){return ar(function(p,b,_){return l(b,_,i)},null,i)};x.prototype.forEach=function(l){return pa(l,this)};var ga=n.count=function(l){return l._size};x.prototype.count=function(){return ga(this)},Object.defineProperty(x.prototype,"size",{get:x.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n});class Ti{constructor(t){K(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,n){return this._map.set(t,n),this}delete(t){return this._map.delete(t),this}clone(){return Gn(this)}toMap(){return new Map(this._map)}}class Wn{constructor(t){if(K(this,"_hamt",wi.empty.beginMutation()),t instanceof Wn){const n=t._hamt.endMutation();t._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(t)for(const[n,r]of t.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,n){return this._hamt.set(t,n),this}delete(t){return this._hamt.delete(t),this}clone(){return Gn(this)}toMap(){return new Map(this._hamt)}}function Gn(e){return re("recoil_hamt_2020")?new Wn(e):new Ti(e)}var Ei={persistentMap:Gn},Ai=Ei.persistentMap,Ci=Object.freeze({__proto__:null,persistentMap:Ai});const{graph:Ni}=Rt,{persistentMap:gr}=Ci;let Vi=0;const lo=()=>Vi++;function uo(){const e=lo();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:gr(),nonvalidatedAtoms:gr()}}function $i(){const e=uo();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,Ni()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var fo={makeEmptyTreeState:uo,makeEmptyStoreState:$i,getNextTreeStateVersion:lo};function Li(...e){const t=new Set;for(const n of e)for(const r of n)t.add(r);return t}var ki=Li;function Mi(e,t,n){const r=e.entries();let o=r.next();for(;!o.done;){const a=o.value;if(t.call(n,a[1],a[0],e))return!0;o=r.next()}return!1}var Di=Mi;const{cleanUpNode:Ii}=ot,{deleteNodeConfigIfPossible:Pi,getNode:ho}=$e,{RetentionZone:po}=Kt,go=new Set;function mo(e,t){const n=e.getState(),r=n.currentTree;if(n.nextTree)return;const o=new Set;for(const s of t)if(s instanceof po)for(const c of Fi(n,s))o.add(c);else o.add(s);const a=xi(e,o);for(const s of a)Bi(e,r,s)}function xi(e,t){const n=e.getState(),r=n.currentTree,o=e.getGraph(r.version),a=new Set,s=new Set;return c(t),a;function c(d){const f=new Set,u=Ui(e,r,d,a,s);for(const R of u){var m;if(ho(R).retainedBy==="recoilRoot"){s.add(R);continue}if(((m=n.retention.referenceCounts.get(R))!==null&&m!==void 0?m:0)>0){s.add(R);continue}if(yo(R).some(g=>n.retention.referenceCounts.get(g))){s.add(R);continue}const L=o.nodeToNodeSubscriptions.get(R);if(L&&Di(L,g=>s.has(g))){s.add(R);continue}a.add(R),f.add(R)}const k=new Set;for(const R of f)for(const L of(P=o.nodeDeps.get(R))!==null&&P!==void 0?P:go){var P;a.has(L)||k.add(L)}k.size&&c(k)}}function Ui(e,t,n,r,o){const a=e.getGraph(t.version),s=[],c=new Set;for(;n.size>0;)d(q(n.values().next().value));return s;function d(f){if(r.has(f)||o.has(f)){n.delete(f);return}if(c.has(f))return;const u=a.nodeToNodeSubscriptions.get(f);if(u)for(const m of u)d(m);c.add(f),n.delete(f),s.push(f)}}function Bi(e,t,n){if(!re("recoil_memory_managament_2020"))return;Ii(e,n);const r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const o=yo(n);for(const d of o){var a;(a=r.retention.nodesRetainedByZone.get(d))===null||a===void 0||a.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const s=r.graphsByVersion.get(t.version);if(s){const d=s.nodeDeps.get(n);if(d!==void 0){s.nodeDeps.delete(n);for(const f of d){var c;(c=s.nodeToNodeSubscriptions.get(f))===null||c===void 0||c.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}Pi(n)}function Fi(e,t){var n;return(n=e.retention.nodesRetainedByZone.get(t))!==null&&n!==void 0?n:go}function yo(e){const t=ho(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof po?[t]:t}function Oi(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):mo(e,new Set([t]))}function ji(e,t,n){var r;if(!re("recoil_memory_managament_2020"))return;const o=e.getState().retention.referenceCounts,a=((r=o.get(t))!==null&&r!==void 0?r:0)+n;a===0?vo(e,t):o.set(t,a)}function vo(e,t){if(!re("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),Oi(e,t)}function zi(e){if(!re("recoil_memory_managament_2020"))return;const t=e.getState();mo(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function qi(e){return e===void 0?"recoilRoot":e}var wt={updateRetainCount:ji,updateRetainCountToZero:vo,releaseScheduledRetainablesNow:zi,retainedByOptionWithDefault:qi};function*Wi(e){for(const t of e)for(const n of t)yield n}var Gi=Wi;const Hi=typeof window=="undefined",Ki=typeof navigator!="undefined"&&navigator.product==="ReactNative";var So={isSSR:Hi,isReactNative:Ki};const{isSSR:Zi}=So,{batchUpdates:dn}=qn,{initializeNodeIfNewToStore:Xi,peekNodeInfo:Ji}=ot,{graph:Qi}=Rt,{DEFAULT_VALUE:Yi,recoilValues:mr,recoilValuesForKeys:yr}=$e,{AbstractRecoilValue:ec,getRecoilValueAsLoadable:tc,setRecoilValue:vr,setUnvalidatedRecoilValue:nc}=at,{updateRetainCount:xt,updateRetainCountToZero:Fh}=wt,{getNextTreeStateVersion:rc,makeEmptyStoreState:oc}=fo;class Jt{constructor(t){K(this,"_store",void 0),K(this,"_refCount",0),K(this,"getLoadable",n=>(this.checkRefCount_INTERNAL(),tc(this._store,n))),K(this,"getPromise",n=>(this.checkRefCount_INTERNAL(),this.getLoadable(n).toPromise())),K(this,"getNodes_UNSTABLE",n=>{if(this.checkRefCount_INTERNAL(),(n==null?void 0:n.isModified)===!0){if((n==null?void 0:n.isInitialized)===!1)return[];const a=this._store.getState().currentTree;return yr(a.dirtyAtoms)}const r=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(n==null?void 0:n.isInitialized)==null?mr.values():n.isInitialized===!0?yr(Gi([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):Kr(mr.values(),({key:a})=>!r.has(a)&&!o.has(a))}),K(this,"getInfo_UNSTABLE",({key:n})=>(this.checkRefCount_INTERNAL(),Ji(this._store,this._store.getState().currentTree,n))),K(this,"map",n=>{this.checkRefCount_INTERNAL();const r=new Rn(this);return n(r),_n(r.getStore_INTERNAL())}),K(this,"asyncMap",async n=>{this.checkRefCount_INTERNAL();const r=new Rn(this);return await n(r),_n(r.getStore_INTERNAL())}),this._store={getState:()=>t,replaceState:n=>{t.currentTree=n(t.currentTree)},getGraph:n=>{const r=t.graphsByVersion;if(r.has(n))return q(r.get(n));const o=Qi();return r.set(n,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(const n of this._store.getState().nodeCleanupFunctions.keys())Xi(this._store,t.currentTree,n,"get"),xt(this._store,n,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!re("recoil_memory_managament_2020"))return()=>{};this._refCount++;let t=!1;return()=>{t||(t=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){!re("recoil_memory_managament_2020")||Zi||window.setTimeout(()=>this.release_INTERNAL(),0)}release_INTERNAL(){!re("recoil_memory_managament_2020")||(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){re("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}}function bo(e,t,n=!1){const r=e.getState(),o=n?rc():t.version;return{currentTree:n?{version:o,stateID:o,transactionMetadata:W({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function ac(e){const t=new Jt(oc());return e!=null?t.map(e):t}function _n(e,t="current"){const n=e.getState(),r=t==="current"?n.currentTree:q(n.previousTree);return new Jt(bo(e,r))}class Rn extends Jt{constructor(t){super(bo(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0));K(this,"set",(n,r)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();dn(()=>{xt(o,n.key,1),vr(this.getStore_INTERNAL(),n,r)})}),K(this,"reset",n=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();dn(()=>{xt(r,n.key,1),vr(this.getStore_INTERNAL(),n,Yi)})}),K(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();dn(()=>{for(const[o,a]of n.entries())xt(r,o,1),nc(r,new ec(o),a)})})}}var Qt={Snapshot:Jt,MutableSnapshot:Rn,freshSnapshot:ac,cloneSnapshot:_n},sc=Qt.Snapshot,ic=Qt.MutableSnapshot,cc=Qt.freshSnapshot,lc=Qt.cloneSnapshot,Yt=Object.freeze({__proto__:null,Snapshot:sc,MutableSnapshot:ic,freshSnapshot:cc,cloneSnapshot:lc});const{getNextTreeStateVersion:uc,makeEmptyStoreState:_o}=fo,{cleanUpNode:dc,getDownstreamNodes:fc,setNodeValue:hc,setUnvalidatedAtomValue_DEPRECATED:pc}=ot,{graph:gc}=Rt,{cloneGraph:mc}=Rt,{applyAtomValueWrites:yc}=at,{releaseScheduledRetainablesNow:Ro}=wt,{freshSnapshot:vc}=Yt,{useCallback:Sc,useContext:wo,useEffect:wn,useMemo:bc,useRef:fn,useState:_c}=pe;function lt(){throw new Error("This component must be used inside a <RecoilRoot> component.")}const To=Object.freeze({getState:lt,replaceState:lt,getGraph:lt,subscribeToTransactions:lt,addTransactionMetadata:lt});let Tn=!1;function Sr(e){if(Tn)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(t.nextTree===null){re("recoil_memory_managament_2020")&&re("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&Ro(e);const n=t.currentTree.version,r=uc();t.nextTree=ne(W({},t.currentTree),{version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(r,mc(q(t.graphsByVersion.get(n))))}}const Eo=pe.createContext({current:To}),Hn=()=>wo(Eo),Ao=pe.createContext(null);function Rc(){return wo(Ao)}function Co(e){const t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){for(const[a,s]of t.nodeTransactionSubscriptions)if(r.has(a))for(const[c,d]of s)d(e);for(const[a,s]of t.transactionSubscriptions)s(e);const o=fc(e,n,r);for(const a of o){const s=t.nodeToComponentSubscriptions.get(a);if(s)for(const[c,[d,f]]of s)f(n)}t.suspendedComponentResolvers.forEach(a=>a())}t.queuedComponentCallbacks_DEPRECATED.forEach(o=>o(n)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function wc({setNotifyBatcherOfChange:e}){const t=Hn(),[n,r]=_c([]);return e(()=>r({})),wn(()=>{pi.enqueueExecution("Batcher",()=>{const o=t.current.getState();o.commitDepth++;try{const{nextTree:a}=o;if(a===null)return;o.previousTree=o.currentTree,o.currentTree=a,o.nextTree=null,Co(t.current);const s=q(o.previousTree).version;o.graphsByVersion.delete(s),o.previousTree=null,re("recoil_memory_managament_2020")&&Ro(t.current)}finally{o.commitDepth--}})}),wn(()=>()=>{e(()=>{})},[e]),null}function Tc(e,t){const n=_o();return t({set:(r,o)=>{const a=n.currentTree,s=hc(e,a,r.key,o),c=new Set(s.keys()),d=a.nonvalidatedAtoms.clone();for(const f of c)d.delete(f);n.currentTree=ne(W({},a),{dirtyAtoms:ki(a.dirtyAtoms,c),atomValues:yc(a.atomValues,s),nonvalidatedAtoms:d})},setUnvalidatedAtomValues:r=>{r.forEach((o,a)=>{n.currentTree=pc(n.currentTree,a,o)})}}),n}function Ec(e){return vc().map(e).getStore_INTERNAL().getState()}let br=0;function Ac({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:n,children:r}){var o;let a;const s=g=>{const S=a.current.graphsByVersion;if(S.has(g))return q(S.get(g));const N=gc();return S.set(g,N),N},c=(g,S)=>{if(S==null){const{transactionSubscriptions:N}=R.current.getState(),T=br++;return N.set(T,g),{release:()=>{N.delete(T)}}}else{const{nodeTransactionSubscriptions:N}=R.current.getState();N.has(S)||N.set(S,new Map);const T=br++;return q(N.get(S)).set(T,g),{release:()=>{const V=N.get(S);V&&(V.delete(T),V.size===0&&N.delete(S))}}}},d=g=>{Sr(R.current);for(const S of Object.keys(g))q(R.current.getState().nextTree).transactionMetadata[S]=g[S]},f=g=>{const S=R.current.getState();Sr(R.current);const N=q(S.nextTree);let T;try{Tn=!0,T=g(N)}finally{Tn=!1}T!==N&&(S.nextTree=T,q(u.current)())},u=fn(null),m=Sc(g=>{u.current=g},[u]),k=(o=pe.createMutableSource)!==null&&o!==void 0?o:pe.unstable_createMutableSource,P=n!=null?n:{getState:()=>a.current,replaceState:f,getGraph:s,subscribeToTransactions:c,addTransactionMetadata:d},R=fn(P);a=fn(e!=null?Tc(P,e):t!=null?Ec(t):_o());const L=bc(()=>k?k(a,()=>a.current.currentTree.version):null,[k,a]);return wn(()=>()=>{for(const g of R.current.getState().knownAtoms)dc(R.current,g)},[]),pe.createElement(Eo.Provider,{value:R},pe.createElement(Ao.Provider,{value:L},pe.createElement(wc,{setNotifyBatcherOfChange:m}),r))}function Cc(e){const o=e,{override:t}=o,n=Lt(o,["override"]),r=Hn();return t===!1&&r.current!==To?pe.createElement(pe.Fragment,null,e.children):pe.createElement(Ac,n)}var en={useStoreRef:Hn,useRecoilMutableSource:Rc,RecoilRoot:Cc,sendEndOfBatchNotifications_FOR_TESTING:Co};function Nc(e,t){const n=new Map;for(const[r,o]of e)t(o,r)&&n.set(r,o);return n}var Vc=Nc;function $c(e,t){const n=new Set;for(const r of e)t(r)&&n.add(r);return n}var Lc=$c;function kc(e,t){if(!e)throw new Error(t)}var Mc=kc,jt=Mc;function Dc(...e){const t=new Map;for(let n=0;n<e.length;n++){const r=e[n].keys();let o;for(;!(o=r.next()).done;)t.set(o.value,e[n].get(o.value))}return t}var Ic=Dc,hn;const No=(hn=pe.useMutableSource)!==null&&hn!==void 0?hn:pe.unstable_useMutableSource;function Pc(){return No&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var xc={mutableSourceExists:Pc,useMutableSource:No};function Uc(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}var Bc=Uc;const{useRef:Fc}=pe;function Oc(){return Fc(),"<component name not available>"}var Kn=Oc;const{batchUpdates:Zn}=qn,{DEFAULT_VALUE:tn,getNode:Vo,nodes:jc}=$e,{useRecoilMutableSource:zc,useStoreRef:Te}=en,{AbstractRecoilValue:Xn,getRecoilValueAsLoadable:St,setRecoilValue:et,setRecoilValueLoadable:qc,setUnvalidatedRecoilValue:Wc,subscribeToRecoilValue:Jn}=at,{updateRetainCount:ut}=wt,{RetentionZone:Gc}=Kt,{Snapshot:Oh,cloneSnapshot:_t}=Yt,{setByAddingToSet:Hc}=Hr,{isSSR:zt}=So,{mutableSourceExists:Kc,useMutableSource:Zc}=xc,{useCallback:Ve,useEffect:Ie,useMemo:Xc,useRef:Ue,useState:Qn}=pe,$o=12e4;function Lo(e,t,n){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(o=>{n.current.getState().suspendedComponentResolvers.add(o)}):e.state==="hasError"?e.contents:new Error(`Invalid value of loadable atom "${t.key}"`)}function Jc(){const e=Te(),[t,n]=Qn([]),r=Ue(new Set);r.current=new Set;const o=Ue(new Set),a=Ue(new Map),s=Ve(d=>{const f=a.current.get(d);f&&(f.release(),a.current.delete(d))},[a]),c=Kn();return Ie(()=>{const d=e.current;function f(u,m){!a.current.has(m)||n([])}Ft(r.current,o.current).forEach(u=>{if(a.current.has(u))return;const m=Jn(d,new Xn(u),P=>{f(P,u)},c);a.current.set(u,m),d.getState().nextTree?d.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{f(d.getState(),u)}):f(d.getState(),u)}),Ft(o.current,r.current).forEach(u=>{s(u)}),o.current=r.current}),Ie(()=>{const d=a.current;return()=>d.forEach((f,u)=>s(u))},[s]),Xc(()=>{function d(R){return L=>{et(e.current,R,L)}}function f(R){return()=>et(e.current,R,tn)}function u(R){return r.current.has(R.key)||(r.current=Hc(r.current,R.key)),St(e.current,R)}function m(R){const L=u(R);return Lo(L,R,e)}function k(R){return[m(R),d(R)]}function P(R){return[u(R),d(R)]}return{getRecoilValue:m,getRecoilValueLoadable:u,getRecoilState:k,getRecoilStateLoadable:P,getSetRecoilState:d,getResetRecoilState:f}},[r,e])}const Qc={current:0};function Yc(e){const t=Te(),n=Ve(()=>{const f=t.current,u=f.getState().currentTree;return St(f,e,u)},[t,e]),r=Ve(()=>n(),[n]),o=Kn(),a=Ve((f,u)=>{const m=t.current;return Jn(m,e,()=>{if(!re("recoil_suppress_rerender_in_callback"))return u();const P=n();d.current.is(P)||u(),d.current=P},o).release},[t,e,o,n]),s=zc(),c=Zc(s,r,a),d=Ue(c);return Ie(()=>{d.current=c}),c}function el(e){const t=Te(),[n,r]=Qn([]),o=Kn();Ie(()=>{const c=t.current,d=c.getState(),f=Jn(c,e,m=>{var k;if(!re("recoil_suppress_rerender_in_callback"))return r([]);const P=St(c,e,c.getState().currentTree);!((k=s.current)===null||k===void 0)&&k.is(P)||r(P),s.current=P},o);if(d.nextTree)c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{s.current=null,r([])});else{var u;if(!re("recoil_suppress_rerender_in_callback"))return r([]);const m=St(c,e,c.getState().currentTree);!((u=s.current)===null||u===void 0)&&u.is(m)||r(m),s.current=m}return f.release},[o,e,t]);const a=St(t.current,e),s=Ue(a);return Ie(()=>{s.current=a}),a}function Yn(e){return re("recoil_memory_managament_2020")&&Po(e),Kc()?Yc(e):el(e)}function ko(e){const t=Te(),n=Yn(e);return Lo(n,e,t)}function er(e){const t=Te();return Ve(n=>{et(t.current,e,n)},[t,e])}function tl(e){const t=Te();return Ve(()=>{et(t.current,e,tn)},[t,e])}function nl(e){return[ko(e),er(e)]}function rl(e){return[Yn(e),er(e)]}function nn(e){const t=Te();Ie(()=>t.current.subscribeToTransactions(e).release,[e,t])}function _r(e){const t=e.atomValues.toMap(),n=Ot(Vc(t,(r,o)=>{const s=Vo(o).persistence_UNSTABLE;return s!=null&&s.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return Ic(e.nonvalidatedAtoms.toMap(),n)}function ol(e){nn(Ve(t=>{let n=t.getState().previousTree;const r=t.getState().currentTree;n||(n=t.getState().currentTree);const o=_r(r),a=_r(n),s=Ot(jc,d=>{var f,u,m,k;return{persistence_UNSTABLE:{type:(f=(u=d.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&f!==void 0?f:"none",backButton:(m=(k=d.persistence_UNSTABLE)===null||k===void 0?void 0:k.backButton)!==null&&m!==void 0?m:!1}}}),c=Lc(r.dirtyAtoms,d=>o.has(d)||a.has(d));e({atomValues:o,previousAtomValues:a,atomInfo:s,modifiedAtoms:c,transactionMetadata:W({},r.transactionMetadata)})},[e]))}function al(e){nn(Ve(t=>{const n=_t(t,"current"),r=_t(t,"previous");e({snapshot:n,previousSnapshot:r})},[e]))}function Mo(e){const t=Ue();return Ie(()=>{t.current=e}),t.current}function sl(){const e=Te(),[t,n]=Qn(()=>_t(e.current)),r=Mo(t),o=Ue();return Ie(()=>(o.current&&!zt&&window.clearTimeout(o.current),t.retain()),[t]),nn(Ve(a=>n(_t(a)),[])),r!==t&&!zt&&(o.current&&(r==null||r.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout(()=>{t.release_INTERNAL(),o.current=null},$o)),t}function Do(){const e=Te();return Ve(t=>{var n;const r=e.current.getState(),o=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,a=t.getStore_INTERNAL().getState().currentTree;Zn(()=>{const s=new Set;for(const f of[o.atomValues.keys(),a.atomValues.keys()])for(const u of f){var c,d;((c=o.atomValues.get(u))===null||c===void 0?void 0:c.contents)!==((d=a.atomValues.get(u))===null||d===void 0?void 0:d.contents)&&Vo(u).shouldRestoreFromSnapshots&&s.add(u)}s.forEach(f=>{qc(e.current,new Xn(f),a.atomValues.has(f)?q(a.atomValues.get(f)):tn)}),e.current.replaceState(f=>ne(W({},f),{stateID:t.getID_INTERNAL()}))})},[e])}function il(){const e=Te();return(t,n={})=>{Zn(()=>{e.current.addTransactionMetadata(n),t.forEach((r,o)=>Wc(e.current,new Xn(o),r))})}}class Io{}const cl=new Io;function ll(e,t){const n=Te(),r=Do();return Ve((...o)=>{function a(f,u){et(n.current,f,u)}function s(f){et(n.current,f,tn)}const c=_t(n.current);let d=cl;return Zn(()=>{const f="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw new Error(f);const u=e({set:a,reset:s,snapshot:c,gotoSnapshot:r});if(typeof u!="function")throw new Error(f);d=u(...o)}),d instanceof Io&&jt(!1),d},t!=null?[...t,n]:void 0)}function Po(e){if(!!re("recoil_memory_managament_2020"))return ul(e)}function ul(e){const n=(Array.isArray(e)?e:[e]).map(s=>s instanceof Gc?s:s.key),r=Te();Ie(()=>{if(!re("recoil_memory_managament_2020"))return;const s=r.current;if(o.current&&!zt)window.clearTimeout(o.current),o.current=null;else for(const c of n)ut(s,c,1);return()=>{for(const c of n)ut(s,c,-1)}},[r,...n]);const o=Ue(),a=Mo(n);if(!zt&&(a===void 0||!Bc(a,n))){const s=r.current;for(const c of n)ut(s,c,1);if(a)for(const c of a)ut(s,c,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(const c of n)ut(s,c,-1)},$o)}}var dl={recoilComponentGetRecoilValueCount_FOR_TESTING:Qc,useGotoRecoilSnapshot:Do,useRecoilCallback:ll,useRecoilInterface:Jc,useRecoilSnapshot:sl,useRecoilState:nl,useRecoilStateLoadable:rl,useRecoilTransactionObserver:al,useRecoilValue:ko,useRecoilValueLoadable:Yn,useRetain:Po,useResetRecoilState:tl,useSetRecoilState:er,useSetUnvalidatedAtomValues:il,useTransactionObservation_DEPRECATED:ol,useTransactionSubscription_DEPRECATED:nn};const{peekNodeInfo:fl}=ot,{useStoreRef:hl}=en;function pl(){const e=hl();return({key:t})=>fl(e.current,e.current.getState().currentTree,t)}var gl=pl;const{RecoilRoot:ml,useStoreRef:yl}=en,{useMemo:vl}=pe;function Sl(){const e=yl().current;return vl(()=>{function t({children:n}){return pe.createElement(ml,{store_INTERNAL:e},n)}return t},[e])}var bl=Sl;function Ne(e,t,n){if(typeof e=="string"&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var r;return(r=JSON.stringify(e))!==null&&r!==void 0?r:""}if(se(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((o,a)=>Ne(o,t,a.toString()))}]`;if(typeof e.toJSON=="function")return Ne(e.toJSON(n),t,n);if(e instanceof Map){const o={};for(const[a,s]of e)o[typeof a=="string"?a:Ne(a,t)]=s;return Ne(o,t,n)}return e instanceof Set?Ne(Array.from(e).sort((o,a)=>Ne(o,t).localeCompare(Ne(a,t))),t,n):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?Ne(Array.from(e),t,n):`{${Object.keys(e).filter(o=>e[o]!==void 0).sort().map(o=>`${Ne(o,t)}:${Ne(e[o],t,o)}`).join(",")}}`}function _l(e,t={allowFunctions:!1}){return Ne(e,t)}var rn=_l;class Rl{constructor(t){var n,r,o;K(this,"_numLeafs",void 0),K(this,"_root",void 0),K(this,"_onHit",void 0),K(this,"_onSet",void 0),K(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(n=t==null?void 0:t.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=t==null?void 0:t.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(o=t==null?void 0:t.mapNodeValue)!==null&&o!==void 0?o:a=>a}size(){return this._numLeafs}root(){return this._root}get(t,n){var r;return(r=this.getLeafNode(t,n))===null||r===void 0?void 0:r.value}getLeafNode(t,n){return xo(this.root(),r=>this._mapNodeValue(t(r)),{onNodeVisit:r=>{n==null||n.onNodeVisit(r),r.type==="leaf"&&this._onHit(r)}})}set(t,n,r){let o;const a=En(this.root(),t.map(([s,c])=>[s,this._mapNodeValue(c)]),null,n,null,{onNodeVisit:s=>{r==null||r.onNodeVisit(s),s.type==="leaf"&&(o=s)}});this.root()||(this._root=a),this._numLeafs++,this._onSet(q(o))}delete(t){if(!this.root())return!1;const n=q(this.root());return wl(n,t,t.parent)?t===n||n.type==="branch"&&!n.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=Bo(t),!0):!1}clear(){this._numLeafs=0,this._root=null}}const xo=(e,t,n)=>{var r;if(e==null)return;if(n==null||(r=n.onNodeVisit)===null||r===void 0||r.call(n,e),e.type==="leaf")return e;const o=t(e.nodeKey);return xo(e.branches.get(o),t,n)},En=(e,t,n,r,o,a)=>{var s;let c;if(e==null)if(t.length===0)c={type:"leaf",value:r,parent:n,branchKey:o};else{const[d,...f]=t,[u,m]=d;c={type:"branch",nodeKey:u,parent:n,branches:new Map,branchKey:o},c.branches.set(m,En(null,f,c,r,m,a))}else if(c=e,t.length){const[d,...f]=t,[u,m]=d;e.type==="branch"&&e.nodeKey===u||jt(!1),e.branches.set(m,En(e.branches.get(m),f,e,r,m,a))}return a==null||(s=a.onNodeVisit)===null||s===void 0||s.call(a,c),c},wl=(e,t,n)=>n?(n.branches.delete(t.branchKey),Uo(e,n,n.parent)):e===t,Uo=(e,t,n)=>n?(t.branches.size===0&&n.branches.delete(t.branchKey),Uo(e,n,n.parent)):e===t,Bo=e=>e.type==="leaf"?1:Array.from(e.branches.values()).reduce((t,n)=>t+Bo(n),0);var Tl={TreeCache:Rl},El=Tl.TreeCache,Fo=Object.freeze({__proto__:null,TreeCache:El});class Al{constructor(t){var n;K(this,"_maxSize",void 0),K(this,"_size",void 0),K(this,"_head",void 0),K(this,"_tail",void 0),K(this,"_map",void 0),K(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=t.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){const n=this._keyMapper(t),r=this._map.get(n);if(!!r)return this.set(t,r.value),r.value}set(t,n){const r=this._keyMapper(t);this._map.get(r)&&this.delete(t);const a=this.head(),s={key:t,right:a,left:null,value:n};a?a.left=s:this._tail=s,this._map.set(r,s),this._head=s,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const t=this.tail();t&&this.delete(t.key)}delete(t){const n=this._keyMapper(t);if(!this._size||!this._map.has(n))return;const r=q(this._map.get(n)),o=r.right,a=r.left;o&&(o.left=r.left),a&&(a.right=r.right),r===this.head()&&(this._head=o),r===this.tail()&&(this._tail=a),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Cl={LRUCache:Al},Nl=Cl.LRUCache,Oo=Object.freeze({__proto__:null,LRUCache:Nl});const{LRUCache:Vl}=Oo,{TreeCache:$l}=Fo;function Ll(e,t=n=>n){const n=new Vl({maxSize:e}),r=new $l({mapNodeValue:t,onHit:o=>{n.set(o,!0)},onSet:o=>{const a=n.tail();n.set(o,!0),a&&r.size()>e&&r.delete(a.key)}});return r}var kl=Ll;const{TreeCache:Ml}=Fo,Dt={equality:"reference",eviction:"none",maxSize:1/0};function Dl({equality:e=Dt.equality,eviction:t=Dt.eviction,maxSize:n=Dt.maxSize}=Dt){const r=Il(e);return Pl(t,n,r)}function Il(e){switch(e){case"reference":return t=>t;case"value":return t=>rn(t)}throw new Error(`Unrecognized equality policy ${e}`)}function Pl(e,t,n){switch(e){case"none":return new Ml({mapNodeValue:n});case"lru":return kl(q(t),n)}throw new Error(`Unrecognized eviction policy ${e}`)}var xl=Dl;function Ul(e){return()=>null}var Bl={startPerfBlock:Ul};const{CANCELED:dt,Canceled:Fl,loadableWithError:ft,loadableWithPromise:Ol,loadableWithValue:pn}=Gt,{getNodeLoadable:Rr,peekNodeLoadable:jl,setNodeValue:zl}=ot,{saveDependencyMapToStore:ql}=Rt,{DEFAULT_VALUE:Wl,RecoilValueNotReady:Gl,getConfigDeletionHandler:Hl,registerNode:wr}=$e,{isRecoilValue:Kl}=ze,{AbstractRecoilValue:Zl}=ze,{setRecoilValueLoadable:Xl}=at,{retainedByOptionWithDefault:Jl}=wt,{cloneSnapshot:Ql}=Yt,{startPerfBlock:Yl}=Bl,ht=[],It=new Map,eu=(()=>{let e=0;return()=>e++})();function tu(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function nu(e){const{key:t,get:n,cachePolicy_UNSTABLE:r}=e,o=e.set!=null?e.set:void 0,a=xl(r!=null?r:{equality:"reference",eviction:"none"}),s=Jl(e.retainedBy_UNSTABLE),c=new Map;let d=0;function f(){return!re("recoil_memory_managament_2020")||d>0}function u(h){return c.has(h)||c.set(h,tu()),q(c.get(h))}function m(h){return d++,h.getState().knownSelectors.add(t),()=>{d--,h.getState().knownSelectors.delete(t),c.delete(h)}}function k(){return Hl(t)!==void 0&&!f()}function P(h,v,y){if(v.state==="loading"){let $=It.get(y);$==null&&It.set(y,$=new Set),$.add(h)}}function R(h,v){const y=It.get(v);if(y!==void 0){for(const $ of y)Xl($,new Zl(t),h);It.delete(v)}}function L(h,v,y){if(v.atomValues.has(y))return q(v.atomValues.get(y));const $=Rr(h,v,y),A=h.getState().knownSelectors.has(y);return $.state!=="loading"&&A&&v.atomValues.set(y,$),$}function g(h,v,y,$,A){return v.then(w=>{if(!f())return ge(h,A),dt;const Z=pn(w);return ae(y,z($),Z),T(h,y,new Set($.keys()),A),N(h,Z,A),{__value:w,__key:t}}).catch(w=>{if(!f())return ge(h,A),dt;if(B(h,A)&&ie($,h,A),se(w))return S(h,w,y,$,A);const Z=ft(w);throw ae(y,z($),Z),T(h,y,new Set($.keys()),A),N(h,Z,A),w})}function S(h,v,y,$,A){return v.then(w=>{if(!f())return ge(h,A),dt;if(w instanceof Fl)return dt;const{__key:Z,__value:ce}=w!=null?w:{};let le=!0;Z!=null&&(y.atomValues.set(Z,pn(ce)),le=!1);const[X,ee]=F(h,y,A,le);if(B(h,A)&&ie(ee,h,A),Y(X),X.state!=="loading"&&(ae(y,z(ee),X),T(h,y,new Set(ee.keys()),A),N(h,X,A)),X.state==="hasError")throw X.contents;return X.state==="hasValue"?{__value:X.contents,__key:t}:X.contents}).catch(w=>{if(!f())return ge(h,A),dt;const Z=ft(w);throw ae(y,z($),ft(w)),T(h,y,new Set($.keys()),A),N(h,Z,A),w})}function N(h,v,y){B(h,y)&&(H(v,h),R(v,y))}function T(h,v,y,$){var A,w,Z,ce;if(B(h,$)||v.version===((A=h.getState())===null||A===void 0||(w=A.currentTree)===null||w===void 0?void 0:w.version)||v.version===((Z=h.getState())===null||Z===void 0||(ce=Z.nextTree)===null||ce===void 0?void 0:ce.version)){var le,X,ee;ql(new Map([[t,y]]),h,(le=(X=h.getState())===null||X===void 0||(ee=X.nextTree)===null||ee===void 0?void 0:ee.version)!==null&&le!==void 0?le:h.getState().currentTree.version)}}function V(h,v,y,$,A){y.add($),T(h,v,y,A)}function F(h,v,y,$=!1){const A=Yl(t);let w,Z=!1,ce;const le=new Map,X=new Set;T(h,v,X,y);function ee(Me){const{key:ke}=Me;V(h,v,X,ke,y);const Re=$?Rr(h,v,ke):L(h,v,ke);if(Y(Re),le.set(ke,Re),Re.state==="hasValue")return Re.contents;throw Re.contents}let be=!1;const Ge=Me=>(...ke)=>{if(!be)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");const Re=Ql(h),st=Me({snapshot:Re});if(typeof st!="function")throw new Error("getCallback() expects a function that returns a function.");return st(...ke)};try{w=n({get:ee,getCallback:Ge}),w=Kl(w)?ee(w):w,be=!0,se(w)?w=g(h,w,v,le,y).finally(A):A()}catch(Me){w=Me,se(w)?w=S(h,w,v,le,y).finally(A):(Z=!0,A())}return Z?ce=ft(w):se(w)?ce=Ol(w):ce=pn(w),Y(ce),[ce,le]}function j(h,v){const y=new Set,$=u(h),A=a.get(w=>(typeof w!="string"&&jt(!1),L(h,v,w).contents),{onNodeVisit:w=>{w.type==="branch"&&w.nodeKey!==t&&typeof w.nodeKey=="string"&&y.add(w.nodeKey)}});return A&&T(h,v,y,$.latestExecutionId),A}function z(h){return Array.from(h.entries()).map(([v,y])=>[v,y.contents])}function U(h,v){const y=eu(),[$,A]=F(h,v,y);return H($,h,A,y,v),ve(v,z(A),$),P(h,$,y),$}function oe(h,v){const y=j(h,v);if(y!=null)return H(y,h),y;const $=de(h,v);if($){const A=$;return P(h,q(A.latestLoadable),q(A.latestExecutionId)),q(A.latestLoadable)}return U(h,v)}function de(h,v){var y;const[,$]=(y=Array.from(c.entries()).find(([,A])=>A.latestLoadable!=null&&A.latestExecutionId!=null&&!G(h,v)))!==null&&y!==void 0?y:[];return $}const Se=new Map;function G(h,v){var y,$;const A=u(h),w=(y=A.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&y!==void 0?y:new Map,Z=Array((($=Se.get(v.version))!==null&&$!==void 0?$:new Map).entries()),ce=Se.has(v.version)&&Z.length===w.size&&Z.every(([le,X])=>w.get(le)===X);return w==null||v.version===A.stateVersion||ce?!1:(Se.set(v.version,new Map(w)),Array.from(w).some(([le,X])=>{const ee=L(h,v,le);return ee.contents!==X.contents&&!(X.state==="loading"&&ee.state!=="loading")}))}function H(h,v,y,$,A){const w=u(v);h.state==="loading"?(w.depValuesDiscoveredSoFarDuringAsyncWork=y,w.latestExecutionId=$,w.latestLoadable=h,w.stateVersion=A==null?void 0:A.version):(w.depValuesDiscoveredSoFarDuringAsyncWork=null,w.latestExecutionId=null,w.latestLoadable=null,w.stateVersion=null)}function ve(h,v,y){y.state!=="loading"&&ae(h,v,y)}function ie(h,v,y){const $=u(v);B(v,y)&&($.depValuesDiscoveredSoFarDuringAsyncWork=h)}function ge(h,v){B(h,v)&&c.delete(h)}function B(h,v){const y=u(h);return v===y.latestExecutionId}function Y(h){h.state!=="loading"&&(h.contents,void 0)}function me(h){}function ae(h,v,y){h.atomValues.set(t,y),a.set(v,y)}function Ee(h){if(ht.includes(t)){const v=`Recoil selector has circular dependencies: ${ht.slice(ht.indexOf(t)).join(" \u2192 ")}`;return ft(new Error(v))}ht.push(t);try{return h()}finally{ht.pop()}}function x(h,v){return a.get($=>{typeof $!="string"&&jt(!1);const A=jl(h,v,$);return A==null?void 0:A.contents})}function Ae(h,v){return Ee(()=>oe(h,v))}function Oe(h){h.atomValues.delete(t)}return o!=null?wr({key:t,peek:x,get:Ae,set:(v,y,$)=>{let A=!1;const w=new Map;function Z({key:ee}){if(A)throw new Error("Recoil: Async selector sets are not currently supported.");const be=L(v,y,ee);if(Y(be),be.state==="hasValue")return be.contents;throw be.state==="loading"?new Gl(ee):be.contents}function ce(ee,be){if(A)throw new Error("Recoil: Async selector sets are not currently supported.");const Ge=typeof be=="function"?be(Z(ee)):be;zl(v,y,ee.key,Ge).forEach((ke,Re)=>w.set(Re,ke))}function le(ee){ce(ee,Wl)}const X=o({set:ce,get:Z,reset:le},$);if(X!==void 0)throw se(X)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return A=!0,w},init:m,invalidate:Oe,shouldDeleteConfigOnRelease:k,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:s}):wr({key:t,peek:x,get:Ae,init:m,invalidate:Oe,shouldDeleteConfigOnRelease:k,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:s})}var qt=nu;const{loadableWithError:Tr,loadableWithPromise:Er,loadableWithValue:pt}=Gt,{DEFAULT_VALUE:xe,DefaultValue:Xe,getConfigDeletionHandler:jo,registerNode:ru,setConfigDeletionHandler:ou}=$e,{isRecoilValue:au}=ze,{markRecoilValueModified:su,setRecoilValue:Ar,setRecoilValueLoadable:iu}=at,{retainedByOptionWithDefault:cu}=wt;function lu(e){const{key:t,persistence_UNSTABLE:n}=e,r=cu(e.retainedBy_UNSTABLE);let o=0,a=se(e.default)?Er(e.default.then(g=>(a=pt(g),{__key:t,__value:g})).catch(g=>{throw a=Tr(g),g})):pt(e.default),s;const c=new Map;function d(g,S){const N=S.then(T=>{var V,F;return((F=((V=g.getState().nextTree)!==null&&V!==void 0?V:g.getState().currentTree).atomValues.get(t))===null||F===void 0?void 0:F.contents)===N&&Ar(g,L,T),{__key:t,__value:T}}).catch(T=>{var V,F;throw((F=((V=g.getState().nextTree)!==null&&V!==void 0?V:g.getState().currentTree).atomValues.get(t))===null||F===void 0?void 0:F.contents)===N&&iu(g,L,Tr(T)),T});return N}function f(g,S,N){o++;const T=g.getState().knownAtoms.has(t);if(g.getState().knownAtoms.add(t),a.state==="loading"){const U=()=>{var oe;((oe=g.getState().nextTree)!==null&&oe!==void 0?oe:g.getState().currentTree).atomValues.has(t)||su(g,L)};a.contents.then(U).catch(U)}let V=xe,F=null;if(e.effects_UNSTABLE!=null&&!T){let U=!0;const oe=G=>H=>{if(U){const ve=V instanceof Xe||se(V)?a.state==="hasValue"?a.contents:xe:V;V=typeof H=="function"?H(ve):H,se(V)&&(V=V.then(ie=>(F={effect:G,value:ie},ie)))}else{if(se(H))throw new Error("Setting atoms to async values is not implemented.");typeof H!="function"&&(F={effect:G,value:H}),Ar(g,L,typeof H=="function"?ve=>{const ie=H(ve);return F={effect:G,value:ie},ie}:H)}},de=G=>()=>oe(G)(xe),Se=G=>H=>{g.subscribeToTransactions(ve=>{let{currentTree:ie,previousTree:ge}=ve.getState();ge||(ge=ie);const B=ie.atomValues.get(t);if(B==null||B.state==="hasValue"){var Y,me,ae,Ee;const x=B!=null?B.contents:xe,Ae=(Y=ge.atomValues.get(t))!==null&&Y!==void 0?Y:a,Oe=Ae.state==="hasValue"?Ae.contents:xe;((me=F)===null||me===void 0?void 0:me.effect)!==G||((ae=F)===null||ae===void 0?void 0:ae.value)!==x?H(x,Oe):((Ee=F)===null||Ee===void 0?void 0:Ee.effect)===G&&(F=null)}},t)};for(const G of(j=e.effects_UNSTABLE)!==null&&j!==void 0?j:[]){var j;const H=G({node:L,trigger:N,setSelf:oe(G),resetSelf:de(G),onSet:Se(G)});H!=null&&c.set(g,H)}U=!1}if(!(V instanceof Xe)){var z;const U=se(V)?Er(d(g,V)):pt(V);S.atomValues.set(t,U),(z=g.getState().nextTree)===null||z===void 0||z.atomValues.set(t,U)}return()=>{var U;o--,(U=c.get(g))===null||U===void 0||U(),c.delete(g),g.getState().knownAtoms.delete(t)}}function u(g,S){var N,T,V;return(N=(T=S.atomValues.get(t))!==null&&T!==void 0?T:(V=s)===null||V===void 0?void 0:V[1])!==null&&N!==void 0?N:a}function m(g,S){if(S.atomValues.has(t))return q(S.atomValues.get(t));if(S.nonvalidatedAtoms.has(t)){if(s!=null)return s;if(n==null)return a;const N=S.nonvalidatedAtoms.get(t),T=n.validator(N,xe);return s=T instanceof Xe?a:pt(T),s}else return a}function k(){s=void 0}function P(g,S,N){if(S.atomValues.has(t)){const T=q(S.atomValues.get(t));if(T.state==="hasValue"&&N===T.contents)return new Map}else if(!S.nonvalidatedAtoms.has(t)&&N instanceof Xe)return new Map;return s=void 0,new Map().set(t,pt(N))}function R(){return jo(t)!==void 0&&o<=0}const L=ru({key:t,peek:u,get:m,set:P,init:f,invalidate:k,shouldDeleteConfigOnRelease:R,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return L}function zo(e){const r=e,{default:t}=r,n=Lt(r,["default"]);return au(t)?uu(ne(W({},n),{default:t})):lu(ne(W({},n),{default:t}))}function uu(e){const t=zo(ne(W({},e),{default:xe,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:ne(W({},e.persistence_UNSTABLE),{validator:r=>r instanceof Xe?r:q(e.persistence_UNSTABLE).validator(r,xe)}),effects_UNSTABLE:e.effects_UNSTABLE})),n=qt({key:`${e.key}__withFallback`,get:({get:r})=>{const o=r(t);return o instanceof Xe?e.default:o},set:({set:r},o)=>r(t,o),dangerouslyAllowMutability:e.dangerouslyAllowMutability});return ou(n.key,jo(e.key)),n}var qo=zo;class du{constructor(t){var n;K(this,"_map",void 0),K(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=t==null?void 0:t.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,n){this._map.set(this._keyMapper(t),n)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}}var fu={MapCache:du},hu=fu.MapCache,pu=Object.freeze({__proto__:null,MapCache:hu});const{LRUCache:gu}=Oo,{MapCache:mu}=pu,Pt={equality:"reference",eviction:"none",maxSize:1/0};function yu({equality:e=Pt.equality,eviction:t=Pt.eviction,maxSize:n=Pt.maxSize}=Pt){const r=vu(e);return Su(t,n,r)}function vu(e){switch(e){case"reference":return t=>t;case"value":return t=>rn(t)}throw new Error(`Unrecognized equality policy ${e}`)}function Su(e,t,n){switch(e){case"none":return new mu({mapKey:n});case"lru":return new gu({mapKey:n,maxSize:q(t)})}throw new Error(`Unrecognized eviction policy ${e}`)}var Wo=yu;const{setConfigDeletionHandler:bu}=$e;function _u(e){var t;const n=Wo((t=e.cachePolicyForParams_UNSTABLE)!==null&&t!==void 0?t:{equality:"value",eviction:"none"});return r=>{var o;const a=n.get(r);if(a!=null)return a;const f=e,{cachePolicyForParams_UNSTABLE:s}=f,c=Lt(f,["cachePolicyForParams_UNSTABLE"]),d=qo(ne(W({},c),{key:`${e.key}__${(o=rn(r))!==null&&o!==void 0?o:"void"}`,default:typeof e.default=="function"?e.default(r):e.default,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(r):e.retainedBy_UNSTABLE,effects_UNSTABLE:typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(r):e.effects_UNSTABLE}));return n.set(r,d),bu(d.key,()=>{n.delete(r)}),d}}var Ru=_u;const{setConfigDeletionHandler:wu}=$e;let Tu=0;function Eu(e){var t;const n=Wo((t=e.cachePolicyForParams_UNSTABLE)!==null&&t!==void 0?t:{equality:"value",eviction:"none"});return r=>{var o;const a=n.get(r);if(a!=null)return a;const s=`${e.key}__selectorFamily/${(o=rn(r,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${Tu++}`,c=m=>e.get(r)(m),d=e.cachePolicy_UNSTABLE,f=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(r):e.retainedBy_UNSTABLE;let u;if(e.set!=null){const m=e.set;u=qt({key:s,get:c,set:(P,R)=>m(r)(P,R),cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:f})}else u=qt({key:s,get:c,cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:f});return n.set(r,u),wu(u.key,()=>{n.delete(r)}),u}}var Be=Eu;const Au=Be({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Cu(e){return Au(e)}var Nu=Cu;const Vu=Be({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function $u(e){return Vu(e)}var Lu=$u;function ku(e){return e}var Mu=ku;const{loadableWithError:Go,loadableWithPromise:Ho,loadableWithValue:Ko}=Gt;function on(e,t){const n=Array(t.length).fill(void 0),r=Array(t.length).fill(void 0);for(const[o,a]of t.entries())try{n[o]=e(a)}catch(s){r[o]=s}return[n,r]}function Du(e){return e!=null&&!se(e)}function an(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function tr(e){return e!=null&&typeof e=="object"&&e.hasOwnProperty("__value")?e.__value:e}function An(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((n,r,o)=>ne(W({},n),{[r]:t[o]}),{})}function Ye(e,t,n){const r=n.map((o,a)=>o==null?Ko(t[a]):se(o)?Ho(o):Go(o));return An(e,r)}function Iu(e,t){return t.map((n,r)=>n===void 0?e[r]:n)}const Pu=Be({key:"__waitForNone",get:e=>({get:t})=>{const n=an(e),[r,o]=on(t,n);return Ye(e,r,o)}}),xu=Be({key:"__waitForAny",get:e=>({get:t})=>{const n=an(e),[r,o]=on(t,n);return o.some(a=>!se(a))?Ye(e,r,o):new Promise(a=>{for(const[s,c]of o.entries())se(c)&&c.then(d=>{r[s]=tr(d),o[s]=void 0,a(Ye(e,r,o))}).catch(d=>{o[s]=d,a(Ye(e,r,o))})})}}),Uu=Be({key:"__waitForAll",get:e=>({get:t})=>{const n=an(e),[r,o]=on(t,n);if(o.every(s=>s==null))return An(e,r);const a=o.find(Du);if(a!=null)throw a;return Promise.all(o).then(s=>An(e,Iu(r,s).map(tr)))}}),Bu=Be({key:"__waitForAllSettled",get:e=>({get:t})=>{const n=an(e),[r,o]=on(t,n);return o.every(a=>!se(a))?Ye(e,r,o):Promise.all(o.map((a,s)=>se(a)?a.then(c=>{r[s]=tr(c),o[s]=void 0}).catch(c=>{r[s]=void 0,o[s]=c}):null)).then(()=>Ye(e,r,o))}}),Fu=Be({key:"__noWait",get:e=>({get:t})=>{try{return Ko(t(e))}catch(n){return se(n)?Ho(n):Go(n)}}});var Ou={waitForNone:Pu,waitForAny:xu,waitForAll:Uu,waitForAllSettled:Bu,noWait:Fu};const{batchUpdates:ju,setBatcher:zu}=qn,{DefaultValue:qu}=$e,{RecoilRoot:Wu}=en,{isRecoilValue:Gu}=ze,{retentionZone:Hu}=Kt,{freshSnapshot:Ku}=Yt,{useGotoRecoilSnapshot:Zu,useRecoilCallback:Xu,useRecoilSnapshot:Ju,useRecoilState:Qu,useRecoilStateLoadable:Yu,useRecoilTransactionObserver:ed,useRecoilValue:td,useRecoilValueLoadable:nd,useResetRecoilState:rd,useRetain:od,useSetRecoilState:ad,useSetUnvalidatedAtomValues:sd,useTransactionObservation_DEPRECATED:id}=dl,{noWait:cd,waitForAll:ld,waitForAllSettled:ud,waitForAny:dd,waitForNone:fd}=Ou;var Pe={DefaultValue:qu,RecoilRoot:Wu,useRecoilBridgeAcrossReactRoots_UNSTABLE:bl,atom:qo,selector:qt,retentionZone:Hu,atomFamily:Ru,selectorFamily:Be,constSelector:Nu,errorSelector:Lu,readOnlySelector:Mu,useRecoilValue:td,useRecoilValueLoadable:nd,useRecoilState:Qu,useRecoilStateLoadable:Yu,useSetRecoilState:ad,useResetRecoilState:rd,useGetRecoilValueInfo_UNSTABLE:gl,useRetain:od,useRecoilCallback:Xu,useGotoRecoilSnapshot:Zu,useRecoilSnapshot:Ju,useRecoilTransactionObserver_UNSTABLE:ed,useTransactionObservation_UNSTABLE:id,useSetUnvalidatedAtomValues_UNSTABLE:sd,noWait:cd,waitForNone:fd,waitForAny:dd,waitForAll:ld,waitForAllSettled:ud,isRecoilValue:Gu,batchUpdates:ju,setBatcher:zu,snapshot_UNSTABLE:Ku},hd=Pe.RecoilRoot,pd=Pe.atom,Le=Pe.selector,gd=Pe.selectorFamily,ye=Pe.useRecoilValue,tt=Pe.useRecoilState,Tt=Pe.useSetRecoilState,md=Pe.useResetRecoilState,gn=Pe.useRecoilCallback;const yd=rt(()=>({loader:{display:"flex",justifyContent:"center",alignItems:"center"}})),vd=({message:e="",pageSize:t=5})=>he(De,{height:t===5?"850px":t===10?"1640px":"4040px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[C(Ca,{size:60}),C(De,{mt:6,children:C(yt,{className:yd.AccordionSubtitle,children:e})})]});var Sd=typeof global=="object"&&global&&global.Object===Object&&global,Zo=Sd,bd=typeof self=="object"&&self&&self.Object===Object&&self,_d=Zo||bd||Function("return this")(),Fe=_d,Rd=Fe.Symbol,Wt=Rd,Xo=Object.prototype,wd=Xo.hasOwnProperty,Td=Xo.toString,gt=Wt?Wt.toStringTag:void 0;function Ed(e){var t=wd.call(e,gt),n=e[gt];try{e[gt]=void 0;var r=!0}catch{}var o=Td.call(e);return r&&(t?e[gt]=n:delete e[gt]),o}var Ad=Object.prototype,Cd=Ad.toString;function Nd(e){return Cd.call(e)}var Vd="[object Null]",$d="[object Undefined]",Cr=Wt?Wt.toStringTag:void 0;function Et(e){return e==null?e===void 0?$d:Vd:Cr&&Cr in Object(e)?Ed(e):Nd(e)}function nr(e){return e!=null&&typeof e=="object"}var Ld=Array.isArray,kd=Ld;function Jo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Md="[object AsyncFunction]",Dd="[object Function]",Id="[object GeneratorFunction]",Pd="[object Proxy]";function Qo(e){if(!Jo(e))return!1;var t=Et(e);return t==Dd||t==Id||t==Md||t==Pd}var xd=Fe["__core-js_shared__"],mn=xd,Nr=function(){var e=/[^.]+$/.exec(mn&&mn.keys&&mn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ud(e){return!!Nr&&Nr in e}var Bd=Function.prototype,Fd=Bd.toString;function We(e){if(e!=null){try{return Fd.call(e)}catch{}try{return e+""}catch{}}return""}var Od=/[\\^$.*+?()[\]{}|]/g,jd=/^\[object .+?Constructor\]$/,zd=Function.prototype,qd=Object.prototype,Wd=zd.toString,Gd=qd.hasOwnProperty,Hd=RegExp("^"+Wd.call(Gd).replace(Od,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kd(e){if(!Jo(e)||Ud(e))return!1;var t=Qo(e)?Hd:jd;return t.test(We(e))}function Zd(e,t){return e==null?void 0:e[t]}function At(e,t){var n=Zd(e,t);return Kd(n)?n:void 0}var Xd=At(Fe,"WeakMap"),Cn=Xd,Jd=9007199254740991;function Yo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jd}function Qd(e){return e!=null&&Yo(e.length)&&!Qo(e)}var Yd=Object.prototype;function ea(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Yd;return e===n}var ef="[object Arguments]";function Vr(e){return nr(e)&&Et(e)==ef}var ta=Object.prototype,tf=ta.hasOwnProperty,nf=ta.propertyIsEnumerable,rf=Vr(function(){return arguments}())?Vr:function(e){return nr(e)&&tf.call(e,"callee")&&!nf.call(e,"callee")},of=rf;function af(){return!1}var na=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$r=na&&typeof module=="object"&&module&&!module.nodeType&&module,sf=$r&&$r.exports===na,Lr=sf?Fe.Buffer:void 0,cf=Lr?Lr.isBuffer:void 0,lf=cf||af,uf=lf,df="[object Arguments]",ff="[object Array]",hf="[object Boolean]",pf="[object Date]",gf="[object Error]",mf="[object Function]",yf="[object Map]",vf="[object Number]",Sf="[object Object]",bf="[object RegExp]",_f="[object Set]",Rf="[object String]",wf="[object WeakMap]",Tf="[object ArrayBuffer]",Ef="[object DataView]",Af="[object Float32Array]",Cf="[object Float64Array]",Nf="[object Int8Array]",Vf="[object Int16Array]",$f="[object Int32Array]",Lf="[object Uint8Array]",kf="[object Uint8ClampedArray]",Mf="[object Uint16Array]",Df="[object Uint32Array]",J={};J[Af]=J[Cf]=J[Nf]=J[Vf]=J[$f]=J[Lf]=J[kf]=J[Mf]=J[Df]=!0;J[df]=J[ff]=J[Tf]=J[hf]=J[Ef]=J[pf]=J[gf]=J[mf]=J[yf]=J[vf]=J[Sf]=J[bf]=J[_f]=J[Rf]=J[wf]=!1;function If(e){return nr(e)&&Yo(e.length)&&!!J[Et(e)]}function Pf(e){return function(t){return e(t)}}var ra=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bt=ra&&typeof module=="object"&&module&&!module.nodeType&&module,xf=bt&&bt.exports===ra,yn=xf&&Zo.process,Uf=function(){try{var e=bt&&bt.require&&bt.require("util").types;return e||yn&&yn.binding&&yn.binding("util")}catch{}}(),kr=Uf,Mr=kr&&kr.isTypedArray,Bf=Mr?Pf(Mr):If,Ff=Bf;function Of(e,t){return function(n){return e(t(n))}}var jf=Of(Object.keys,Object),zf=jf,qf=Object.prototype,Wf=qf.hasOwnProperty;function Gf(e){if(!ea(e))return zf(e);var t=[];for(var n in Object(e))Wf.call(e,n)&&n!="constructor"&&t.push(n);return t}var Hf=At(Fe,"Map"),Nn=Hf,Kf=At(Fe,"DataView"),Vn=Kf,Zf=At(Fe,"Promise"),$n=Zf,Xf=At(Fe,"Set"),Ln=Xf,Dr="[object Map]",Jf="[object Object]",Ir="[object Promise]",Pr="[object Set]",xr="[object WeakMap]",Ur="[object DataView]",Qf=We(Vn),Yf=We(Nn),eh=We($n),th=We(Ln),nh=We(Cn),je=Et;(Vn&&je(new Vn(new ArrayBuffer(1)))!=Ur||Nn&&je(new Nn)!=Dr||$n&&je($n.resolve())!=Ir||Ln&&je(new Ln)!=Pr||Cn&&je(new Cn)!=xr)&&(je=function(e){var t=Et(e),n=t==Jf?e.constructor:void 0,r=n?We(n):"";if(r)switch(r){case Qf:return Ur;case Yf:return Dr;case eh:return Ir;case th:return Pr;case nh:return xr}return t});var rh=je,oh="[object Map]",ah="[object Set]",sh=Object.prototype,ih=sh.hasOwnProperty;function ch(e){if(e==null)return!0;if(Qd(e)&&(kd(e)||typeof e=="string"||typeof e.splice=="function"||uf(e)||Ff(e)||of(e)))return!e.length;var t=rh(e);if(t==oh||t==ah)return!e.size;if(ea(e))return!Gf(e).length;for(var n in e)if(ih.call(e,n))return!1;return!0}const lh=e=>e.map(t=>{var r;const n={};return n.europePmcId=t.id,n.fullTextOpen=t.inEPMC==="Y"||t.inPMC==="Y",n.title=t.title,n.year=t.pubYear,n.abstract=t.abstractText,n.openAccess=t.isOpenAccess!=="N",n.authors=((r=t.authorList)==null?void 0:r.author)||[],n.journal=ne(W({},t.journalInfo),{page:t.pageInfo}),n}),Q=pd({key:"literatureState",default:{id:"",cursor:"",category:["disease","drug","target"],query:null,globalEntity:null,entities:[],selectedEntities:[],litsIds:[],page:0,pageSize:5,litsCount:0,loadingEntities:!1}}),Ct=Le({key:"loadingEntitiesState",get:({get:e})=>{const{loadingEntities:t}=e(Q);return t},set:({set:e,get:t},n)=>{const r=t(Q);return e(Q,ne(W({},r),{loadingEntities:n}))}}),uh=Le({key:"selectedCategoriesState",get:({get:e})=>{const{category:t}=e(Q);return[...t].sort()}}),dh=Le({key:"litsCursorState",get:({get:e})=>{const{cursor:t}=e(Q);return t}}),oa=Le({key:"tablePageState",get:({get:e})=>{const{page:t}=e(Q);return t}}),rr=Le({key:"tablePageSizeState",get:({get:e})=>{const{pageSize:t}=e(Q);return t},set:({set:e,get:t},n)=>{const r=t(Q);return e(Q,ne(W({},r),{pageSize:n}))}}),aa=Le({key:"litsCountState",get:({get:e})=>{const{litsCount:t}=e(Q);return t}}),Ke=Le({key:"litsIdsState",get:({get:e})=>{const{litsIds:t}=e(Q);return t},set:({set:e,get:t},n)=>{const r=t(Q);return e(Q,ne(W({},r),{litsIds:n}))}}),fh=Le({key:"displayedPublications",get:({get:e})=>{const t=e(oa),n=e(rr),r=e(Ke);return ch(r)?[]:qr(r,t,n)}}),hh=Le({key:"entitiesState",get:({get:e})=>{const{entities:t}=e(Q);return t}}),sa=Le({key:"selectedEntitiesState",get:({get:e})=>{const{selectedEntities:t}=e(Q);return t},set:({set:e,get:t},n)=>{const r=t(Q);return e(Q,ne(W({},r),{selectedEntities:n}))}}),Nt=Le({key:"updateLiteratureState",set:({set:e,get:t},n)=>{const r=t(Q);return e(Q,W(W({},r),n))}}),ph=gd({key:"literaturesEuropePMCQuery",get:({literaturesIds:e})=>async()=>{var o;if(e.length===0)return[];const{baseUrl:t,requestOptions:n}=$a(e),r=await gh({baseUrl:t,requestOptions:n});if(r.error)throw r.error;return(o=r.resultList)==null?void 0:o.result}}),gh=async({baseUrl:e,requestOptions:t})=>fetch(e,t).then(n=>n.json()),nt=({id:e="",threshold:t=.5,size:n=15,query:r,cursor:o=null,category:a=[],entities:s=[]})=>{const c=a.length===0?null:a,d=s.map(f=>f.object.id);return Mn.query({query:r,variables:{cursor:o,id:e,ids:d,threshold:t,size:n,entityNames:c}})},mh=rt(()=>({root:{marginTop:0}})),yh=({hideSearch:e=!1})=>{const t=mh(),n=ye(Ke),[r,o]=tt(Ct),a=ye(aa),s=ye(dh),c=ye(fh),d=ye(Q),f=Tt(Nt),u=ye(oa),m=ye(rr),k=gn(({snapshot:g,set:S})=>async()=>{const N=await g.getPromise(Ke),T=N.filter(U=>U.status==="ready").map(U=>U.id);if(T.length===0)return;const V=await g.getPromise(ph({literaturesIds:T})),F=lh(V),j=new Map(F.map(U=>[U.europePmcId,U])),z=N.map(U=>{const oe=j.get(U.id);if(U.status==="loaded")return U;const de=oe?"loaded":"missing";return ne(W({},U),{status:de,publication:oe})});S(Ke,z)});fe.exports.useEffect(()=>{n.length!==0&&k()},[n]);const P=gn(({snapshot:g})=>async S=>{var T,V,F;if(S*u+S>n.length&&s!==null){const{query:j,id:z,category:U,selectedEntities:oe,cursor:de,globalEntity:Se}=d;o(!0);const G=await nt({query:j,id:z,category:U,entities:oe,cursor:de});o(!1);const H=G.data[Se],ve=await g.getPromise(Ke),ie=(V=(T=H.literatureOcurrences)==null?void 0:T.rows)==null?void 0:V.map(({pmid:B})=>({id:B,status:"ready",publication:null})),ge={litsIds:[...ve,...ie],cursor:(F=H.literatureOcurrences)==null?void 0:F.cursor,page:0,pageSize:S};f(ge)}else f({pageSize:S})}),R=gn(({snapshot:g})=>async S=>{var N,T,V;if(m*S+m>n.length&&s!==null){const{query:F,id:j,category:z,selectedEntities:U,cursor:oe,globalEntity:de}=d;o(!0);const Se=await nt({query:F,id:j,category:z,entities:U,cursor:oe});o(!1);const G=Se.data[de],H=await g.getPromise(Ke),ve=(T=(N=G.literatureOcurrences)==null?void 0:N.rows)==null?void 0:T.map(({pmid:ge})=>({id:ge,status:"ready",publication:null})),ie={litsIds:[...H,...ve],cursor:(V=G.literatureOcurrences)==null?void 0:V.cursor,page:S};f(ie)}else f({page:S})}),L=[{id:"publications",label:" ",renderCell:({publication:g,status:S})=>S==="ready"?C(vh,{}):S==="missing"?null:C(La,W({},g)),filterValue:({row:g})=>{var S;return`${(S=g.journal.journal)==null?void 0:S.title} ${g==null?void 0:g.title} ${g==null?void 0:g.year}
        ${g.authors.reduce((N,T)=>(T.fullName&&N.push(T.fullName),N),[]).join(" ")}`}}];return r?C(vd,{pageSize:m,message:"Loading literature ocurrences results"}):C(zr,{classes:t,showGlobalFilter:!e,columns:L,rows:c,rowCount:a,rowsPerPageOptions:[5,10,25],page:u,pageSize:m,onPageChange:R,onRowsPerPageChange:P})},vh=()=>C(Na,{in:!0,children:he(De,{mb:2,children:[C(Mt,{height:60}),C(Mt,{width:"60%",height:45}),he(Va,{container:!0,wrap:"nowrap",children:[C(De,{width:130,mr:1,children:C(Mt,{height:45})}),C(De,{width:130,children:C(Mt,{height:45})})]})]})}),Sh="http://platform-docs.opentargets.org/bibliography";function bh({name:e}){return he(Sn,{children:["Scientific literature mentioning NLP-recognised entity"," ",C("strong",{children:e})," and other selected co-occurring entities. Source:"," ",C(Je,{external:!0,to:Sh,children:"Open Targets"}),"."]})}const _h=rt(e=>({root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},loadingContainer:{display:"flex",margin:"10px"}}));function Rh({id:e}){const t=ye(hh),n=ye(Q),r=Tt(Nt),[o,a]=tt(sa),[s,c]=tt(Ct),d=async u=>{var T,V,F,j;const{query:m,id:k,category:P,globalEntity:R}=n,L=[...o,{score:u.score,object:{name:u.object.name||u.object.approvedSymbol,id:u.object.id}}];a(L),c(!0);const S=(await nt({query:m,id:k,category:P,entities:L})).data[R],N={entities:S.similarEntities,litsIds:(V=(T=S.literatureOcurrences)==null?void 0:T.rows)==null?void 0:V.map(({pmid:z})=>({id:z,status:"ready",publication:null})),litsCount:(F=S.literatureOcurrences)==null?void 0:F.count,cursor:(j=S.literatureOcurrences)==null?void 0:j.cursor,loadingEntities:!1,page:0};r(N)},f=u=>{var m;return e===((m=u.object)==null?void 0:m.id)||o.find(k=>k.object.id===u.object.id)?null:u};return t.map((u,m)=>u.object?f(u)?C(bn,{in:!0,children:C(Ut,{style:{opacity:s?.5:1},label:u.object.name||u.object.approvedSymbol,disabled:s,clickable:!0,onClick:()=>{d(u)},title:`Score: ${u.score} ID: ${u.object.id}`,color:"primary",variant:"outlined"})},u.object.id):null:C(bn,{in:!0,children:C(Ut,{style:{opacity:s?.5:1},label:u.id,disabled:!0,title:"Missing object entity",color:"secondary",variant:"outlined"})},`empty-entity-${m}`))}function wh({name:e,id:t}){const n=_h(),r=Tt(Nt),o=ye(Q),[a,s]=tt(Ct),[c,d]=tt(sa),f=async u=>{var T,V,F,j;const{query:m,id:k,category:P,globalEntity:R}=o,L=[...c.slice(0,u),...c.slice(u+1)];d(L),s(!0);const S=(await nt({query:m,id:k,category:P,entities:L})).data[R],N={entities:S.similarEntities,litsIds:(V=(T=S.literatureOcurrences)==null?void 0:T.rows)==null?void 0:V.map(({pmid:z})=>({id:z,status:"ready",publication:null})),litsCount:(F=S.literatureOcurrences)==null?void 0:F.count,cursor:(j=S.literatureOcurrences)==null?void 0:j.cursor,loadingEntities:!1,page:0};r(N)};return he("div",{children:[he("div",{className:n.root,children:[C(Ut,{label:e,title:`ID: ${t}`,color:"primary"}),c.map((u,m)=>C(bn,{in:!0,children:C(Ut,{label:u.object.name,title:`Score: ${u.score} ID: ${u.object.id}`,color:"primary",clickable:!0,disabled:a,onClick:()=>{f(m)},onDelete:()=>{f(m)}})},u.object.id))]}),C("div",{className:n.root,children:C(Rh,{id:t})})]})}const Th=(e,t)=>t.indexOf(e)!==-1?[...t.filter(r=>r!==e).sort()]:[...t,e],Eh=[{name:"target",label:"Target"},{name:"disease",label:"Disease"},{name:"drug",label:"Drug"}];function Ah(){const e=ye(uh),t=Tt(Nt),[n,r]=tt(Ct),o=ye(Q),a=async s=>{const{query:c,id:d,category:f,selectedEntities:u,globalEntity:m,cursor:k}=o,{target:{name:P}}=s,R=Th(P,f);r(!0);const S={entities:(await nt({query:c,id:d,category:R,entities:u,cursor:k})).data[m].similarEntities,loadingEntities:!1,category:R};t(S)};return he("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[C(Ha,{style:{marginRight:"15px"},id:"demo-mutiple-name-label",children:"Tag category:"}),C(Ba,{row:!0,children:Eh.map(({name:s,label:c})=>C(Fa,{control:C(Oa,{checked:e.indexOf(s)!==-1,onChange:a,name:s,color:"primary",disabled:n}),label:c},s))})]})}const Ch=rt(()=>({resultCount:{marginLeft:"2rem",marginRight:"6rem"}}));function Nh(){const e=Ch(),t=ye(rr),n=ye(aa);return ye(Ct)?C("div",{className:e.resultCount,children:"Loading count..."}):he(yt,{variant:"body2",className:e.resultCount,children:["Showing ",n>t?t:n," of ",n," results"]})}const Vh=rt(()=>({controlsContainer:{display:"flex",alignItems:"center",margin:"20px 0"}}));function $h({id:e,name:t,entity:n,BODY_QUERY:r}){const o=Vh(),a=Tt(Nt),s=md(Q),c=ye(Q),{category:d}=c;return fe.exports.useEffect(()=>{async function f(){var P,R,L,g;const m=(await nt({id:e,query:r,category:d})).data[n],k={entities:m.similarEntities,litsIds:(R=(P=m.literatureOcurrences)==null?void 0:P.rows)==null?void 0:R.map(({pmid:S})=>({id:S,status:"ready",publication:null})),litsCount:(L=m.literatureOcurrences)==null?void 0:L.count,cursor:(g=m.literatureOcurrences)==null?void 0:g.cursor,id:e,query:r,globalEntity:n};a(k)}return f(),function(){s()}},[]),he("div",{children:[he(De,{className:o.controlsContainer,children:[C(Ah,{}),C(Nh,{})]}),C(wh,{id:e,name:t}),C(yh,{hideSearch:!0,handleRowsPerPageChange:()=>{}})]})}function jh({definition:e,name:t,id:n,entity:r,BODY_QUERY:o}){return C(hd,{children:C(jr,{definition:e,request:{loading:!1,error:null,data:!0},renderDescription:()=>C(bh,{name:t}),renderBody:()=>C($h,{id:n,name:t,entity:r,BODY_QUERY:o})})})}export{Bh as B,Nn as M,Wt as S,jh as a,Et as b,kd as c,Jo as d,of as e,uf as f,At as g,Ff as h,nr as i,Qd as j,Gf as k,rh as l,Yo as m,Pf as n,Ln as o,Fe as r};
