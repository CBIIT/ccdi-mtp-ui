import{m as U,r as m,an as D,a as l,ad as W,j as h,b as E,L as V,n as x,ah as X,G as y,T as Y}from"./index.ec2996a9.js";import{a as Z}from"./TableDrawer.dc5a9538.js";import{A,F as _}from"./Facets.52ed6bf8.js";import{L as ee}from"./Legend.6c760add.js";import{u as ie}from"./useBatchDownloader.27945310.js";import{d as q}from"./dataTypes.ad082e33.js";import{a as $,C as L}from"./CardContent.9d8c6621.js";import"./graphiql.min.35449f36.js";import"./ToolbarSelect.cd37b9c4.js";import"./TablePagination.6ed57057.js";import"./transform.5b5ae4b7.js";import"./partnerPreviewUtils.81b319ce.js";import"./FormControlLabel.47f62ae2.js";var v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DiseaseAssociationsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"efoId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"index"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"size"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortBy"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AggregationFilter"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disease"},arguments:[{kind:"Argument",name:{kind:"Name",value:"efoId"},value:{kind:"Variable",name:{kind:"Name",value:"efoId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associatedTargets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"index"},value:{kind:"Variable",name:{kind:"Name",value:"index"}}},{kind:"ObjectField",name:{kind:"Name",value:"size"},value:{kind:"Variable",name:{kind:"Name",value:"size"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderByScore"},value:{kind:"Variable",name:{kind:"Name",value:"sortBy"}}},{kind:"Argument",name:{kind:"Name",value:"BFilter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}},{kind:"Argument",name:{kind:"Name",value:"aggregationFilters"},value:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvedSymbol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvedName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"datatypeScores"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"componentId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:592}};v.loc.source={body:`query DiseaseAssociationsQuery(
  $efoId: String!
  $index: Int!
  $size: Int!
  $filter: String
  $sortBy: String!
  $aggregationFilters: [AggregationFilter!]
) {
  disease(efoId: $efoId) {
    id
    associatedTargets(
      page: { index: $index, size: $size }
      orderByScore: $sortBy
      BFilter: $filter
      aggregationFilters: $aggregationFilters
    ) {
      count
      rows {
        target {
          id
          approvedSymbol
          approvedName
        }
        score
        datatypeScores {
          componentId: id
          score
        }
      }
    }
  }
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};function S(e,i){if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){var a=e.type;a.kind==="NamedType"&&i.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(n){S(n,i)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(n){S(n,i)}),e.definitions&&e.definitions.forEach(function(n){S(n,i)})}var w={};(function(){v.definitions.forEach(function(i){if(i.name){var a=new Set;S(i,a),w[i.name.value]=a}})})();function R(e,i){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==i)return n}}function ne(e,i){var a={kind:e.kind,definitions:[R(e,i)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=w[i]||new Set,r=new Set,t=new Set;for(n.forEach(function(s){t.add(s)});t.size>0;){var c=t;t=new Set,c.forEach(function(s){if(!r.has(s)){r.add(s);var o=w[s]||new Set;o.forEach(function(u){t.add(u)})}})}return r.forEach(function(s){var o=R(e,s);o&&a.definitions.push(o)}),a}ne(v,"DiseaseAssociationsQuery");const ae=U(e=>({root:{overflow:"visible",padding:"2rem 2rem 0 0"},table:{tableLayout:"fixed"},sortLabel:{top:"8px"},innerLabel:{position:"absolute",display:"inline-block",transformOrigin:"0 0",bottom:0,transform:"rotate(315deg)",marginBottom:"5px"},symbolHeaderCell:{width:"10%",borderBottom:0,height:"140px",verticalAlign:"bottom",textAlign:"end",paddingBottom:".4rem"},nameHeaderCell:{width:"20%",borderBottom:0,height:"140px",verticalAlign:"bottom",paddingBottom:".4rem"},headerCell:{position:"relative",borderBottom:0,height:"140px",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"bottom"},overallCell:{border:0,textAlign:"center",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"1px",paddingRight:"10px"},cell:{border:0,height:"20px",textAlign:"center",padding:"1px 1px","&:last-child":{paddingRight:0}},symbolCell:{border:0,width:"20%",padding:"0 0.5rem 0 0"},nameCell:{border:0,width:"10%",padding:"0 0 0 0.5rem"},symbolContainer:{display:"block",textAlign:"end",textOverflow:"ellipsis",overflow:"hidden",color:e.palette.text.primary,"&:hover":{color:e.palette.text.primary}},nameContainer:{display:"block",textOverflow:"ellipsis",overflow:"hidden",color:e.palette.text.primary,"&:hover":{color:e.palette.text.primary}}}));function te(e,i){const a=[{id:"symbol",label:"Symbol",classes:{headerCell:i.symbolHeaderCell,cell:i.symbolCell},exportValue:n=>n.target.approvedSymbol,renderCell:n=>l(V,{to:`/evidence/${n.ensemblId}/${e}`,className:i.symbolContainer,children:n.symbol})},{id:"score",label:"Overall association score",classes:{headerCell:i.headerCell,cell:i.overallCell,sortLabel:i.sortLabel,innerLabel:i.innerLabel},sortable:!0,renderCell:({score:n,ensemblId:r})=>l(A,{score:n,ensemblId:r,efoId:e})}];return q.filter(n=>(x.profile.hideDataTypes.length===0||!x.profile.hideDataTypes.includes(n.id))&&(!n.isPrivate||n.isPrivate&&x.profile.isPartnerPreview)).forEach(n=>{a.push({id:n.id,label:n.label,classes:{headerCell:i.headerCell,innerLabel:i.innerLabel,sortLabel:i.sortLabel,cell:i.cell},exportValue:r=>{const t=r.datatypeScores.find(c=>c.componentId===n.id);return t?t.score:"No data"},sortable:!0,renderCell:r=>l(A,{score:r[n.id],ensemblId:r.ensemblId,efoId:e})})}),a.push({id:"name",label:"Target name",classes:{headerCell:i.nameHeaderCell,cell:i.nameCell},exportValue:n=>n.target.approvedName,hidden:["smDown","lgOnly"],renderCell:n=>l(V,{to:`/evidence/${n.ensemblId}/${e}`,className:i.nameContainer,children:l("span",{title:n.name,children:n.name})})}),a}function re(e){return e.map(i=>{const a={ensemblId:i.target.id,symbol:i.target.approvedSymbol,name:i.target.approvedName,score:i.score};return q.forEach(n=>{const r=i.datatypeScores.find(t=>t.componentId===n.id);r&&(a[n.id]=r.score)}),a})}function le({efoId:e,aggregationFilters:i}){const a=ae(),[n,r]=m.exports.useState([]),[t,c]=m.exports.useState(),[s,o]=m.exports.useState(!0),[u,p]=m.exports.useState(!1),[g,I]=m.exports.useState(""),[k,O]=m.exports.useState("score"),[P,T]=m.exports.useState(0),[f,z]=m.exports.useState(50);m.exports.useEffect(()=>{let d=!0;return p(!0),D.query({query:v,variables:{efoId:e,index:0,size:f,sortBy:k,filter:g,aggregationFilters:i}}).then(({data:b})=>{d&&(r(b.disease.associatedTargets.rows),c(b.disease.associatedTargets.count),T(0),o(!1),p(!1))}),()=>d=!1},[e,f,k,g,i]);const Q=ie(v,{efoId:e,filter:g===""?null:g,sortBy:k,aggregationFilters:i},"data.disease.associatedTargets");function G(d){p(!0),D.query({query:v,variables:{efoId:e,index:d,size:f,sortBy:k,filter:g,aggregationFilters:i}}).then(({data:b})=>{r(b.disease.associatedTargets.rows),T(d),p(!1)})}function j(d){z(d)}function H(d){O(d)}function J(d){d!==g&&I(d)}const K=te(e,a),M=re(n);return s?l(W,{variant:"rect",height:"40vh"}):h(E,{children:[l(Z,{hover:!0,showGlobalFilter:!0,loading:u,dataDownloader:!0,dataDownloaderRows:Q,dataDownloaderFileStem:`${e}-associated-diseases`,classes:{root:a.root,table:a.table},sortBy:k,order:"asc",page:P,columns:K,rows:M,pageSize:f,rowCount:t,rowsPerPageOptions:[10,50,200,500],onGlobalFilterChange:J,onSortBy:H,onPageChange:G,onRowsPerPageChange:j}),l(ee,{})]})}var F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DiseaseFacetsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"efoId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AggregationFilter"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disease"},arguments:[{kind:"Argument",name:{kind:"Name",value:"efoId"},value:{kind:"Variable",name:{kind:"Name",value:"efoId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associatedTargets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"aggregationFilters"},value:{kind:"Variable",name:{kind:"Name",value:"aggregationFilters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggregations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniques"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:464}};F.loc.source={body:`query DiseaseFacetsQuery(
  $efoId: String!
  $aggregationFilters: [AggregationFilter!]
) {
  disease(efoId: $efoId) {
    id
    name
    associatedTargets(aggregationFilters: $aggregationFilters) {
      count
      aggregations {
        uniques
        aggs {
          name
          uniques
          rows {
            key
            uniques
            aggs {
              key
              uniques
            }
          }
        }
      }
    }
  }
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};function N(e,i){if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){var a=e.type;a.kind==="NamedType"&&i.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(n){N(n,i)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(n){N(n,i)}),e.definitions&&e.definitions.forEach(function(n){N(n,i)})}var C={};(function(){F.definitions.forEach(function(i){if(i.name){var a=new Set;N(i,a),C[i.name.value]=a}})})();function B(e,i){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==i)return n}}function se(e,i){var a={kind:e.kind,definitions:[B(e,i)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=C[i]||new Set,r=new Set,t=new Set;for(n.forEach(function(s){t.add(s)});t.size>0;){var c=t;t=new Set,c.forEach(function(s){if(!r.has(s)){r.add(s);var o=C[s]||new Set;o.forEach(function(u){t.add(u)})}})}return r.forEach(function(s){var o=B(e,s);o&&a.definitions.push(o)}),a}se(F,"DiseaseFacetsQuery");function Se({efoId:e,name:i}){var o;const[a,n]=m.exports.useState([]),{loading:r,data:t}=X(F,{variables:{efoId:e,aggregationFilters:a}}),c=u=>{n(u)},s=(o=t==null?void 0:t.disease)==null?void 0:o.associatedTargets.aggregations.aggs;return h(y,{style:{marginTop:"8px"},container:!0,spacing:2,children:[l(y,{item:!0,xs:12,children:l(Y,{variant:"h6",children:t?h(E,{children:[h("strong",{children:[t.disease.associatedTargets.count," targets"]})," ","associated with ",l("strong",{children:t.disease.name})]}):l("strong",{children:"Loading..."})})}),l(y,{item:!0,xs:12,lg:3,children:l($,{elevation:0,children:l(L,{children:l(_,{loading:r,data:s,onChange:c,type:"target"})})})}),l(y,{item:!0,xs:12,lg:9,children:l($,{elevation:0,style:{overflow:"visible"},children:l(L,{children:l(le,{efoId:e,aggregationFilters:a})})})})]})}export{Se as default};
